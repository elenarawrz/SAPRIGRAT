package com.saprigrat.ui.forms.parcelas;

import java.util.LinkedList;

import org.vaadin.dialogs.ConfirmDialog;

import com.saprigrat.data.Datos;
import com.saprigrat.data.Usuario;
import com.saprigrat.ui.components.Foto;
import com.saprigrat.ui.interfaces.Formulario;
import com.vaadin.annotations.AutoGenerated;
import com.vaadin.data.Property.ValueChangeEvent;
import com.vaadin.data.Property.ValueChangeListener;
import com.vaadin.data.validator.RegexpValidator;
import com.vaadin.event.ItemClickEvent;
import com.vaadin.event.ItemClickEvent.ItemClickListener;
import com.vaadin.event.ShortcutAction.KeyCode;
import com.vaadin.event.ShortcutAction.ModifierKey;
import com.vaadin.shared.ui.combobox.FilteringMode;
import com.vaadin.ui.AbsoluteLayout;
import com.vaadin.ui.AbstractField;
import com.vaadin.ui.Alignment;
import com.vaadin.ui.Button;
import com.vaadin.ui.Button.ClickEvent;
import com.vaadin.ui.Button.ClickListener;
import com.vaadin.ui.ComboBox;
import com.vaadin.ui.CustomComponent;
import com.vaadin.ui.HorizontalLayout;
import com.vaadin.ui.Label;
import com.vaadin.ui.Notification;
import com.vaadin.ui.OptionGroup;
import com.vaadin.ui.Panel;
import com.vaadin.ui.Table;
import com.vaadin.ui.TextArea;
import com.vaadin.ui.TextField;
import com.vaadin.ui.VerticalLayout;

@SuppressWarnings("serial")
public class Aprovechamiento extends CustomComponent implements Formulario
{
	/*- VaadinEditorProperties={"grid":"RegularGrid,20","showGrid":true,"snapToGrid":true,"snapToObject":true,"movingGuides":false,"snappingDistance":10} */

	@AutoGenerated
	private VerticalLayout mainLayout;
	@AutoGenerated
	private AbsoluteLayout absLBotones;
	@AutoGenerated
	private HorizontalLayout horLBotones;
	@AutoGenerated
	private Button btnVolver;
	@AutoGenerated
	private Button btnNuevo;
	@AutoGenerated
	private Button btnGuardar;
	@AutoGenerated
	private VerticalLayout verLDatos;
	@AutoGenerated
	private Panel panObservaciones;
	@AutoGenerated
	private AbsoluteLayout absLObservaciones;
	@AutoGenerated
	private TextArea txtObservaciones;
	@AutoGenerated
	private Panel panCoordenadas;
	@AutoGenerated
	private AbsoluteLayout absLCoordenadas;
	@AutoGenerated
	private TextField txtOesteY;
	@AutoGenerated
	private TextField txtOesteX;
	@AutoGenerated
	private Label lblOeste;
	@AutoGenerated
	private TextField txtEsteY;
	@AutoGenerated
	private TextField txtEsteX;
	@AutoGenerated
	private Label lblEste;
	@AutoGenerated
	private TextField txtSurY;
	@AutoGenerated
	private TextField txtSurX;
	@AutoGenerated
	private Label lblSur;
	@AutoGenerated
	private TextField txtNorteY;
	@AutoGenerated
	private TextField txtNorteX;
	@AutoGenerated
	private Label lblNorte;
	@AutoGenerated
	private Panel panDistribucion;
	@AutoGenerated
	private AbsoluteLayout absLDistribucion;
	@AutoGenerated
	private TextField txtRegadera;
	@AutoGenerated
	private TextField txtSubramal;
	@AutoGenerated
	private TextField txtRamal;
	@AutoGenerated
	private TextField txtSublateral;
	@AutoGenerated
	private TextField txtLateral;
	@AutoGenerated
	private TextField txtPrincipal;
	@AutoGenerated
	private Panel panDetTecnicos;
	@AutoGenerated
	private VerticalLayout verLDetTecnicos;
	@AutoGenerated
	private AbsoluteLayout absLDetTecnicosDistrito;
	@AutoGenerated
	private ComboBox cmbSRL;
	@AutoGenerated
	private ComboBox cmbModuloR;
	@AutoGenerated
	private ComboBox cmbDtoR;
	@AutoGenerated
	private AbsoluteLayout absLDetTecnicosUnidad;
	@AutoGenerated
	private TextField txtUdeRiego;
	@AutoGenerated
	private AbsoluteLayout absLDetTecnicos;
	@AutoGenerated
	private OptionGroup optUnidadoDto;
	@AutoGenerated
	private ComboBox cmbOrgCuenca;
	@AutoGenerated
	private AbsoluteLayout absLGeneralesFoto;
	@AutoGenerated
	private Foto panFoto;
	@AutoGenerated
	private Panel panGenerales;
	@AutoGenerated
	private AbsoluteLayout absLGenerales;
	@AutoGenerated
	private ComboBox cmbTenencia;
	@AutoGenerated
	private ComboBox cmbFAbast;
	@AutoGenerated
	private Label lblSuperficie;
	@AutoGenerated
	private TextField txtSuperficie;
	@AutoGenerated
	private TextField txtNoLote;
	@AutoGenerated
	private TextField txtNoSubctaPadron;
	@AutoGenerated
	private TextField txtNoCtaPadron;
	@AutoGenerated
	private Table tblListado;
	@AutoGenerated
	private HorizontalLayout horLRespProd;
	@AutoGenerated
	private Panel panProductor;
	@AutoGenerated
	private AbsoluteLayout absLProductor;
	@AutoGenerated
	private ComboBox cmbProductor;
	@AutoGenerated
	private Panel panResponsable;
	@AutoGenerated
	private AbsoluteLayout absLResponsable;
	@AutoGenerated
	private ComboBox cmbResponsable;
	private Usuario usuario;
	private Datos datos;
	private int idAprovechamiento;
	
	private ClickListener agregarListener = new ClickListener()
											{
												@Override
												public void buttonClick(ClickEvent event)
												{
													if(validar())
													{
														LinkedList<Object> valores = llenarListaDeParametros();
														
														String status = datos.registrarAprovechamiento(valores);
														if(!status.isEmpty() && status.indexOf("err") == -1)
														{
															Notification.show("Registro añadido correctamente.", Notification.Type.TRAY_NOTIFICATION);
															//Se cambia a modo de modificación
															setTipo(MODO_MODIFICAR);
															idAprovechamiento = Integer.parseInt(status);
														}
														else
															if(status.indexOf("Rep") != -1)
																Notification.show("No se pudo registrar porque el número de padrón proporcionado ya se encuentra registrado.", Notification.Type.ERROR_MESSAGE);
															else
																Notification.show("Error al añadir registro, comuníquese con el administrador.", Notification.Type.ERROR_MESSAGE);
													}
												}
											};
	private ClickListener modificarListener =   new ClickListener()
												{
													@Override
													public void buttonClick(ClickEvent event)
													{
														if(validar())
														{
															LinkedList<Object> valores = llenarListaDeParametros();
															valores.add(0, idAprovechamiento);
															
															String status = datos.modificarAprovechamiento(valores);
															if(!status.isEmpty() && status.indexOf("err") == -1)
																Notification.show("Registro modificado correctamente.", Notification.Type.TRAY_NOTIFICATION);
															else
																if(status.indexOf("Rep") != -1)
																	Notification.show("No se pudo modificar porque el número de padrón proporcionado ya se encuentra registrado.", Notification.Type.ERROR_MESSAGE);
																else
																	Notification.show("Error al modificar registro, comuníquese con el administrador.", Notification.Type.ERROR_MESSAGE);
														}
													}
												};
	private ItemClickListener llenarFormListener =  new ItemClickListener()
													{
														@Override
														public void itemClick(ItemClickEvent event)
														{
															if(event.isDoubleClick())
															{
																idAprovechamiento = Integer.parseInt(tblListado.getItemCaption(event.getItem()).split(" ")[0]);
																LinkedList<Object> valores = datos.getAprovechamiento(idAprovechamiento);//padron);
																if(!valores.isEmpty())
																{
																	setTipo(MODO_MODIFICAR);
																	
																	llenarLista(datos.getRespProductores(((String)cmbResponsable.getValue()).split(" ")[0]), cmbProductor);
																	cmbProductor.select(valores.remove());
																	txtNoCtaPadron.setValue((String)valores.remove());
																	txtNoSubctaPadron.setValue((String)valores.remove());
																	txtNoLote.setValue((String)valores.remove());
																	txtSuperficie.setValue((String)valores.remove());
																	cmbFAbast.select(valores.remove());
																	cmbTenencia.select(valores.remove());
																	cmbOrgCuenca.select(valores.remove());
																	txtUdeRiego.setValue((String)valores.remove());
																	cmbDtoR.select(valores.remove());
																	cmbSRL.select(valores.remove());
																	cmbModuloR.select(valores.remove());
																	txtPrincipal.setValue((String)valores.remove());
																	txtLateral.setValue((String)valores.remove());
																	txtSublateral.setValue((String)valores.remove());
																	txtRamal.setValue((String)valores.remove());
																	txtSubramal.setValue((String)valores.remove());
																	txtRegadera.setValue((String)valores.remove());
																	txtNorteX.setValue((String)valores.remove());
																	txtNorteY.setValue((String)valores.remove());
																	txtSurX.setValue((String)valores.remove());
																	txtSurY.setValue((String)valores.remove());
																	txtEsteX.setValue((String)valores.remove());
																	txtEsteY.setValue((String)valores.remove());
																	txtOesteX.setValue((String)valores.remove());
																	txtOesteY.setValue((String)valores.remove());
																	txtObservaciones.setValue((String)valores.remove());
																	panFoto.setFoto((String)valores.remove());
																	
																	optUnidadoDto.select(txtUdeRiego.getValue().isEmpty() ? "Distrito de Riego"
																														  : "Unidad de Riego");
																}
																else
																	Notification.show("Error al obtener el registro, comuníquese con el administrador.", Notification.Type.ERROR_MESSAGE);
															}
														}
													};
	private ValueChangeListener llenarTablaListener =   new ValueChangeListener()
														{
															@Override
															public void valueChange(ValueChangeEvent event)
															{
																tblListado.removeAllItems();
																//Obtener la lista
																LinkedList<Object[]> registros = datos.getAprovechamientos(((String)cmbResponsable.getValue()).split(" ")[0]);
																//Crear encabezados de columnas
																setHeaders((String[]) registros.remove());
																//Llenar la lista o mostrar un mensaje dependiendo de si se encontraron elementos o no
																if(!registros.isEmpty())
																	while(!registros.isEmpty())
																		tblListado.addItem(registros.remove(), null);
																else
																	Notification.show("No se encontró ningún resultado.", Notification.Type.HUMANIZED_MESSAGE);
																tblListado.setColumnCollapsed("ID",true);
															}
													
															private void setHeaders(String[] encabezado)
															{
																for(int i=0; i<encabezado.length; i++)
																	tblListado.addContainerProperty(encabezado[i], Object.class, null);
															}
														};
	private ClickListener nuevoListener =   new ClickListener()
											{
												@Override
												public void buttonClick(ClickEvent event)
												{
													if(!tblListado.isVisible())
														showDialog(MODO_AGREGAR);
													else
													{
														inicializar();
														setTipo(MODO_AGREGAR);
													}
												}
											};
	private ClickListener listadoListener = new ClickListener()
											{
												@Override
												public void buttonClick(ClickEvent event)
												{
													showDialog(MODO_LISTA);
												}
											};
	private ValueChangeListener cambioDeDtoListener =new ValueChangeListener()
														{
															@Override
															public void valueChange(ValueChangeEvent event)
															{
																cmbModuloR.addItem("No Aplica");
																cmbSRL.addItem("No Aplica");
																llenarLista(datos.getModRiego((String)cmbDtoR.getValue()), cmbModuloR);
																llenarLista(datos.getSRL((String)cmbDtoR.getValue()), cmbSRL);
															}
														};
	private ValueChangeListener mostrarListasListener =  new ValueChangeListener()
														{
															@Override
															public void valueChange(ValueChangeEvent event)
															{
																setVisibleLayout(optUnidadoDto.getValue().equals("Unidad de Riego"));
															}
															
															private void setVisibleLayout(boolean b)
															{
																absLDetTecnicosUnidad.setVisible(b);
																absLDetTecnicosDistrito.setVisible(!b);
															}
														};
	private ValueChangeListener llenarProdsListener =   new ValueChangeListener()
														{
															@Override
															public void valueChange(ValueChangeEvent event)
															{
																llenarLista(datos.getRespProductores(((String)cmbResponsable.getValue()).split(" ")[0]), cmbProductor);
																if(cmbProductor.size() == 0)
																	Notification.show("No se podrá agregar el registro ya que este técnico no tiene asignado a ningún productor.", Notification.Type.ERROR_MESSAGE);
															}
														};
														
	public Aprovechamiento(Usuario user)
	{
		usuario = user;
//		inicializar();
	}

	@Override
	public void inicializar()
	{
		buildMainLayout();
		setCompositionRoot(mainLayout);
		
		datos = new Datos();
		
		setupCombo(cmbResponsable);
		setupCombo(cmbProductor);
		//Configurar la funcionalidad de selección en tabla
		tblListado.setSelectable(true);
		tblListado.setSortEnabled(true);
		tblListado.setColumnCollapsingAllowed(true);
		tblListado.addItemClickListener(llenarFormListener);
		
		llenarLista(datos.getAbastecimiento(), cmbFAbast);
		llenarLista(datos.getTenencia(), cmbTenencia);
		llenarLista(datos.getOrgCuenca(), cmbOrgCuenca);
		llenarLista(datos.getDtoRiego(), cmbDtoR);
		
		cmbOrgCuenca.setFilteringMode(FilteringMode.CONTAINS);
		
		optUnidadoDto.addItem("Unidad de Riego");
		optUnidadoDto.addItem("Distrito de Riego");
		optUnidadoDto.addValueChangeListener(mostrarListasListener);
		absLDetTecnicosUnidad.setVisible(false);
		absLDetTecnicosDistrito.setVisible(false);
		
		cmbDtoR.addValueChangeListener(cambioDeDtoListener);
		cmbModuloR.setFilteringMode(FilteringMode.CONTAINS);
		cmbSRL.setFilteringMode(FilteringMode.CONTAINS);
		
		btnNuevo.addClickListener(nuevoListener);
		btnVolver.addClickListener(listadoListener);
		//Inicializar en modo lista
		setTipo(MODO_LISTA);
		//Agregar las validaciones necesarias
		setValidaciones();

//		cmbOrgCuenca.addValueChangeListener(cambioDeOrgListener);
//		private ValueChangeListener cambioDeOrgListener =   new ValueChangeListener()
//		{
//			@Override
//			public void valueChange(ValueChangeEvent event)
//			{
//				llenarLista(datos.getDtoRiego((String)cmbOrgCuenca.getValue()), cmbDtoR);
//			}
//		};
	}

	@Override
	public void setTipo(int modoOperacion)
	{
		btnNuevo.setClickShortcut(KeyCode.N, ModifierKey.ALT);
		if(modoOperacion == MODO_LISTA)
		{
			cmbResponsable.addValueChangeListener(llenarTablaListener);
			cmbResponsable.removeValueChangeListener(llenarProdsListener);
			setResponsableTecnico(usuario.getTipo());
			mostrarTabla(true);
			btnGuardar.removeClickShortcut();
			btnGuardar.setVisible(false);
			btnVolver.removeClickShortcut();
			btnVolver.setVisible(false);
			btnNuevo.setCaption("Agregar Nuevo");
		}
		else
		{
			cmbResponsable.removeValueChangeListener(llenarTablaListener);
			cmbResponsable.addValueChangeListener(llenarProdsListener);
			mostrarTabla(false);
			btnGuardar.setClickShortcut(KeyCode.G, ModifierKey.ALT);
			btnGuardar.setVisible(true);
			btnVolver.setClickShortcut(KeyCode.V, ModifierKey.ALT);
			btnVolver.setVisible(true);
			
			if(modoOperacion == MODO_AGREGAR)
			{
				btnGuardar.removeClickListener(modificarListener);
				btnGuardar.addClickListener(agregarListener);
				btnGuardar.setCaption("Guardar");
				btnNuevo.setClickShortcut(KeyCode.L, ModifierKey.ALT);
				btnNuevo.setCaption("Limpiar");
			}
			else
			{
				btnGuardar.removeClickListener(agregarListener);
				btnGuardar.addClickListener(modificarListener);
				btnGuardar.setCaption("Guardar cambios");
				btnNuevo.setCaption("Agregar Nuevo");
			}
		}
	}

	private void setResponsableTecnico(int tipoAgregando)
	{
		if(tipoAgregando == usuario.RESPONSABLE)
		{
			String item = usuario.getCURR() + " " + usuario.getNombre() + " " +
						  usuario.getApPaterno() + " " + usuario.getApMaterno();
			cmbResponsable.addItem(item);
			cmbResponsable.select(item);
			cmbResponsable.setEnabled(false);
		}
		else
		{
			LinkedList<String> lista = datos.getRespTecnicos(usuario.getCURR(), tipoAgregando, usuario.RESPONSABLE);
			if(!lista.isEmpty())
				for(String respTecnico : lista)
					cmbResponsable.addItem(respTecnico);
			else
			{
				mainLayout.removeAllComponents();
				Notification.show("Imposible registrar. Se requiere que exista en la base de datos al menos un productor a quien pueda ser asignado este aprovechamiento.", Notification.Type.ERROR_MESSAGE);
			}
		}
	}
	
	private void mostrarTabla(boolean estado)
	{
		panProductor.setVisible(!estado);
		tblListado.setVisible(estado);
		verLDatos.setVisible(!estado);
	}
	
	private void setValidaciones()
	{
		txtSuperficie.addValidator(new RegexpValidator("^[0-9]+(\\.[0-9]+)?$", "Debe ser un valor numérico"));
	}

	private boolean validar()
	{
		if(cmbResponsable.getValue() == null)
			return notificar("Se requiere especificar el responsable técnico", cmbResponsable);
		if(cmbProductor.getValue() == null)
			return notificar("Se requiere especificar el usuario/productor", cmbProductor);
		if(txtNoCtaPadron.getValue().isEmpty())
			return notificar("Se requiere especificar el número de cuenta del padrón", txtNoCtaPadron);
		if(txtNoLote.getValue().isEmpty())
			return notificar("Se requiere especificar el número de lote", txtNoLote);
		if(txtSuperficie.getValue().isEmpty())
			return notificar("Se requiere especificar la superficie en hectáreas", txtSuperficie);
		if(cmbFAbast.getValue() == null)
			return notificar("Se requiere especificar la fuente de abastecimiento", cmbFAbast);
		if(cmbTenencia.getValue() == null)
			return notificar("Se requiere especificar la tenencia de la tierra", cmbTenencia);
		if(cmbOrgCuenca.getValue() == null)
			return notificar("Se requiere especificar el organismo de cuenca", cmbOrgCuenca);
		if(optUnidadoDto.getValue() == null)
			return notificar("Se requiere especificar si pertenece a unidad o distrito de riego", optUnidadoDto);
		else
			if(optUnidadoDto.getValue().equals("Unidad de Riego") && txtUdeRiego.getValue().isEmpty())
				return notificar("Se requiere especificar la unidad de riego", txtUdeRiego);
			else
				if(optUnidadoDto.getValue().equals("Distrito de Riego") && cmbDtoR.getValue() == null)
					return notificar("Se requiere especificar el distrito de riego", cmbDtoR);
		
		if(!txtSuperficie.isValid())
			return notificar("La superficie debe ser estríctamente numérica", txtSuperficie);
		
		return true;
	}
	
	@SuppressWarnings("rawtypes")
	private boolean notificar(String notificacion, AbstractField field)
	{
		Notification.show(notificacion, Notification.Type.ERROR_MESSAGE);
		field.focus();
		return false;
	}

	private LinkedList<Object> llenarListaDeParametros()
	{
		LinkedList<Object> valores = new LinkedList<Object>();
		valores.add(((String)cmbProductor.getValue()).split(" ")[0]);
		valores.add(txtNoCtaPadron.getValue());
		valores.add(txtNoSubctaPadron.getValue());
		valores.add(txtNoLote.getValue());
		valores.add(Double.parseDouble(txtSuperficie.getValue()));
		valores.add(cmbFAbast.getValue());
		valores.add(cmbTenencia.getValue());
		valores.add(cmbOrgCuenca.getValue());
		if(optUnidadoDto.getValue().equals("Unidad de Riego"))
		{
			valores.add(txtUdeRiego.getValue());
			valores.add("");
			valores.add("");
			valores.add("");
		}
		else
		{
			valores.add("");
			valores.add(cmbDtoR.getValue());
			valores.add(cmbSRL.getValue());
			valores.add(cmbModuloR.getValue());
		}
		valores.add(txtPrincipal.getValue());
		valores.add(txtLateral.getValue());
		valores.add(txtSublateral.getValue());
		valores.add(txtRamal.getValue());
		valores.add(txtSubramal.getValue());
		valores.add(txtRegadera.getValue());
		valores.add(txtNorteX.getValue());
		valores.add(txtNorteY.getValue());
		valores.add(txtSurX.getValue());
		valores.add(txtSurY.getValue());
		valores.add(txtEsteX.getValue());
		valores.add(txtEsteY.getValue());
		valores.add(txtOesteX.getValue());
		valores.add(txtOesteY.getValue());
		valores.add(txtObservaciones.getValue());
		valores.add(panFoto.getFoto());
		return valores;
	}
	
	private void showDialog(final int modo)
	{
		ConfirmDialog.show( this.getUI(),
							"Advertencia:",
							"Perderá todos los cambios realizados hasta el momento.\n¿Desea continuar?",
							"Si", "No",
							new ConfirmDialog.Listener()
							{
								public void onClose(ConfirmDialog dialog)
								{
									if (dialog.isConfirmed())
									{
										inicializar();
										setTipo(modo);
									}
								}
							});
	}
	
	private void llenarLista(LinkedList<String>elementos, ComboBox cmb)
	{
		cmb.removeAllItems();
		for(String elemento : elementos)
			cmb.addItem(elemento);
	}

	private void setupCombo(ComboBox cmb)
	{
		cmb.setNullSelectionAllowed(false);
		cmb.setFilteringMode(FilteringMode.CONTAINS);
		cmb.setInputPrompt("Busque por nombre o CURR.");
	}
	//region UI
	
	@AutoGenerated
	private VerticalLayout buildMainLayout() {
		// common part: create layout
		mainLayout = new VerticalLayout();
		mainLayout.setImmediate(false);
		mainLayout.setWidth("-1px");
		mainLayout.setHeight("-1px");
		mainLayout.setMargin(true);
		mainLayout.setSpacing(true);
		
		// top-level component properties
		setWidth("-1px");
		setHeight("-1px");
		
		// horLRespProd
		horLRespProd = buildHorLRespProd();
		mainLayout.addComponent(horLRespProd);
		
		// tblListado
		tblListado = new Table();
		tblListado
				.setCaption("* Dar doble click sobre un elemento para modificarlo");
		tblListado.setImmediate(false);
		tblListado.setWidth("601px");
		tblListado.setHeight("300px");
		mainLayout.addComponent(tblListado);
		
		// verLDatos
		verLDatos = buildVerLDatos();
		mainLayout.addComponent(verLDatos);
		
		// absLBotones
		absLBotones = buildAbsLBotones();
		mainLayout.addComponent(absLBotones);
		mainLayout.setComponentAlignment(absLBotones, new Alignment(10));
		
		return mainLayout;
	}

	@AutoGenerated
	private HorizontalLayout buildHorLRespProd() {
		// common part: create layout
		horLRespProd = new HorizontalLayout();
		horLRespProd.setImmediate(false);
		horLRespProd.setWidth("601px");
		horLRespProd.setHeight("-1px");
		horLRespProd.setMargin(false);
		
		// panResponsable
		panResponsable = buildPanResponsable();
		horLRespProd.addComponent(panResponsable);
		
		// panProductor
		panProductor = buildPanProductor();
		horLRespProd.addComponent(panProductor);
		horLRespProd.setComponentAlignment(panProductor, new Alignment(6));
		
		return horLRespProd;
	}

	@AutoGenerated
	private Panel buildPanResponsable() {
		// common part: create layout
		panResponsable = new Panel();
		panResponsable.setCaption("Responsable Técnico");
		panResponsable.setImmediate(false);
		panResponsable.setWidth("296px");
		panResponsable.setHeight("-1px");
		
		// absLResponsable
		absLResponsable = buildAbsLResponsable();
		panResponsable.setContent(absLResponsable);
		
		return panResponsable;
	}

	@AutoGenerated
	private AbsoluteLayout buildAbsLResponsable() {
		// common part: create layout
		absLResponsable = new AbsoluteLayout();
		absLResponsable.setImmediate(false);
		absLResponsable.setWidth("100.0%");
		absLResponsable.setHeight("45px");
		
		// cmbResponsable
		cmbResponsable = new ComboBox();
		cmbResponsable.setImmediate(true);
		cmbResponsable.setWidth("275px");
		cmbResponsable.setHeight("25px");
		absLResponsable.addComponent(cmbResponsable, "top:10.0px;left:10.0px;");
		
		return absLResponsable;
	}

	@AutoGenerated
	private Panel buildPanProductor() {
		// common part: create layout
		panProductor = new Panel();
		panProductor.setCaption("Usuario/Productor");
		panProductor.setImmediate(false);
		panProductor.setWidth("296px");
		panProductor.setHeight("-1px");
		
		// absLProductor
		absLProductor = buildAbsLProductor();
		panProductor.setContent(absLProductor);
		
		return panProductor;
	}

	@AutoGenerated
	private AbsoluteLayout buildAbsLProductor() {
		// common part: create layout
		absLProductor = new AbsoluteLayout();
		absLProductor.setImmediate(false);
		absLProductor.setWidth("100.0%");
		absLProductor.setHeight("45px");
		
		// cmbProductor
		cmbProductor = new ComboBox();
		cmbProductor.setImmediate(false);
		cmbProductor.setWidth("275px");
		cmbProductor.setHeight("25px");
		absLProductor.addComponent(cmbProductor, "top:10.0px;left:10.0px;");
		
		return absLProductor;
	}

	@AutoGenerated
	private VerticalLayout buildVerLDatos() {
		// common part: create layout
		verLDatos = new VerticalLayout();
		verLDatos.setImmediate(false);
		verLDatos.setWidth("-1px");
		verLDatos.setHeight("-1px");
		verLDatos.setMargin(false);
		verLDatos.setSpacing(true);
		
		// absLGeneralesFoto
		absLGeneralesFoto = buildAbsLGeneralesFoto();
		verLDatos.addComponent(absLGeneralesFoto);
		
		// panDetTecnicos
		panDetTecnicos = buildPanDetTecnicos();
		verLDatos.addComponent(panDetTecnicos);
		
		// panDistribucion
		panDistribucion = buildPanDistribucion();
		verLDatos.addComponent(panDistribucion);
		
		// panCoordenadas
		panCoordenadas = buildPanCoordenadas();
		verLDatos.addComponent(panCoordenadas);
		
		// panObservaciones
		panObservaciones = buildPanObservaciones();
		verLDatos.addComponent(panObservaciones);
		
		return verLDatos;
	}

	@AutoGenerated
	private AbsoluteLayout buildAbsLGeneralesFoto() {
		// common part: create layout
		absLGeneralesFoto = new AbsoluteLayout();
		absLGeneralesFoto.setImmediate(false);
		absLGeneralesFoto.setWidth("100.0%");
		absLGeneralesFoto.setHeight("221px");
		
		// panGenerales
		panGenerales = buildPanGenerales();
		absLGeneralesFoto.addComponent(panGenerales, "top:0.0px;left:0.0px;");
		
		// panFoto
		panFoto = new Foto();
		panFoto.setImmediate(false);
		panFoto.setWidth("-1px");
		panFoto.setHeight("-1px");
		absLGeneralesFoto.addComponent(panFoto, "top:0.0px;right:0.0px;");
		
		return absLGeneralesFoto;
	}

	@AutoGenerated
	private Panel buildPanGenerales() {
		// common part: create layout
		panGenerales = new Panel();
		panGenerales.setCaption("Datos Generales");
		panGenerales.setImmediate(false);
		panGenerales.setWidth("281px");
		panGenerales.setHeight("-1px");
		
		// absLGenerales
		absLGenerales = buildAbsLGenerales();
		panGenerales.setContent(absLGenerales);
		
		return panGenerales;
	}

	@AutoGenerated
	private AbsoluteLayout buildAbsLGenerales() {
		// common part: create layout
		absLGenerales = new AbsoluteLayout();
		absLGenerales.setImmediate(false);
		absLGenerales.setWidth("100.0%");
		absLGenerales.setHeight("200px");
		
		// txtNoCtaPadron
		txtNoCtaPadron = new TextField();
		txtNoCtaPadron.setCaption("Núm. de Cta. del Padrón");
		txtNoCtaPadron.setImmediate(false);
		txtNoCtaPadron.setWidth("140px");
		txtNoCtaPadron.setHeight("25px");
		absLGenerales.addComponent(txtNoCtaPadron, "top:28.0px;left:10.0px;");
		
		// txtNoSubctaPadron
		txtNoSubctaPadron = new TextField();
		txtNoSubctaPadron.setCaption("Núm. de Subcta.");
		txtNoSubctaPadron.setImmediate(false);
		txtNoSubctaPadron.setWidth("100px");
		txtNoSubctaPadron.setHeight("25px");
		absLGenerales.addComponent(txtNoSubctaPadron,
				"top:28.0px;left:170.0px;");
		
		// txtNoLote
		txtNoLote = new TextField();
		txtNoLote.setCaption("Núm. de Lote");
		txtNoLote.setImmediate(false);
		txtNoLote.setWidth("100px");
		txtNoLote.setHeight("25px");
		absLGenerales.addComponent(txtNoLote, "top:73.0px;left:10.0px;");
		
		// txtSuperficie
		txtSuperficie = new TextField();
		txtSuperficie.setCaption("Superficie");
		txtSuperficie.setImmediate(false);
		txtSuperficie.setWidth("120px");
		txtSuperficie.setHeight("25px");
		absLGenerales.addComponent(txtSuperficie, "top:73.0px;left:130.0px;");
		
		// lblSuperficie
		lblSuperficie = new Label();
		lblSuperficie.setImmediate(false);
		lblSuperficie.setWidth("-1px");
		lblSuperficie.setHeight("-1px");
		lblSuperficie.setValue("ha");
		absLGenerales.addComponent(lblSuperficie, "top:77.0px;left:255.0px;");
		
		// cmbFAbast
		cmbFAbast = new ComboBox();
		cmbFAbast.setCaption("Fuente de Abastecimiento");
		cmbFAbast.setImmediate(false);
		cmbFAbast.setWidth("260px");
		cmbFAbast.setHeight("25px");
		absLGenerales.addComponent(cmbFAbast, "top:118.0px;left:10.0px;");
		
		// cmbTenencia
		cmbTenencia = new ComboBox();
		cmbTenencia.setCaption("Tenencia de la Tierra");
		cmbTenencia.setImmediate(false);
		cmbTenencia.setWidth("260px");
		cmbTenencia.setHeight("25px");
		absLGenerales.addComponent(cmbTenencia, "top:163.0px;left:10.0px;");
		
		return absLGenerales;
	}

	@AutoGenerated
	private Panel buildPanDetTecnicos() {
		// common part: create layout
		panDetTecnicos = new Panel();
		panDetTecnicos.setImmediate(false);
		panDetTecnicos.setWidth("601px");
		panDetTecnicos.setHeight("-1px");
		
		// verLDetTecnicos
		verLDetTecnicos = buildVerLDetTecnicos();
		panDetTecnicos.setContent(verLDetTecnicos);
		
		return panDetTecnicos;
	}

	@AutoGenerated
	private VerticalLayout buildVerLDetTecnicos() {
		// common part: create layout
		verLDetTecnicos = new VerticalLayout();
		verLDetTecnicos.setImmediate(false);
		verLDetTecnicos.setWidth("100.0%");
		verLDetTecnicos.setHeight("100.0%");
		verLDetTecnicos.setMargin(false);
		
		// absLDetTecnicos
		absLDetTecnicos = buildAbsLDetTecnicos();
		verLDetTecnicos.addComponent(absLDetTecnicos);
		
		// absLDetTecnicosUnidad
		absLDetTecnicosUnidad = buildAbsLDetTecnicosUnidad();
		verLDetTecnicos.addComponent(absLDetTecnicosUnidad);
		
		// absLDetTecnicosDistrito
		absLDetTecnicosDistrito = buildAbsLDetTecnicosDistrito();
		verLDetTecnicos.addComponent(absLDetTecnicosDistrito);
		
		return verLDetTecnicos;
	}

	@AutoGenerated
	private AbsoluteLayout buildAbsLDetTecnicos() {
		// common part: create layout
		absLDetTecnicos = new AbsoluteLayout();
		absLDetTecnicos.setImmediate(false);
		absLDetTecnicos.setWidth("100.0%");
		absLDetTecnicos.setHeight("60px");
		
		// cmbOrgCuenca
		cmbOrgCuenca = new ComboBox();
		cmbOrgCuenca.setCaption("Organismo de Cuenca");
		cmbOrgCuenca.setImmediate(false);
		cmbOrgCuenca.setWidth("270px");
		cmbOrgCuenca.setHeight("25px");
		absLDetTecnicos.addComponent(cmbOrgCuenca, "top:28.0px;left:10.0px;");
		
		// optUnidadoDto
		optUnidadoDto = new OptionGroup();
		optUnidadoDto.setImmediate(true);
		optUnidadoDto.setWidth("-1px");
		optUnidadoDto.setHeight("40px");
		absLDetTecnicos.addComponent(optUnidadoDto, "top:14.0px;left:300.0px;");
		
		return absLDetTecnicos;
	}

	@AutoGenerated
	private AbsoluteLayout buildAbsLDetTecnicosUnidad() {
		// common part: create layout
		absLDetTecnicosUnidad = new AbsoluteLayout();
		absLDetTecnicosUnidad.setImmediate(false);
		absLDetTecnicosUnidad.setWidth("100.0%");
		absLDetTecnicosUnidad.setHeight("55px");
		
		// txtUdeRiego
		txtUdeRiego = new TextField();
		txtUdeRiego.setCaption("Unidad de Riego");
		txtUdeRiego.setImmediate(false);
		txtUdeRiego.setWidth("350px");
		txtUdeRiego.setHeight("25px");
		absLDetTecnicosUnidad.addComponent(txtUdeRiego,
				"top:18.0px;left:10.0px;");
		
		return absLDetTecnicosUnidad;
	}

	@AutoGenerated
	private AbsoluteLayout buildAbsLDetTecnicosDistrito() {
		// common part: create layout
		absLDetTecnicosDistrito = new AbsoluteLayout();
		absLDetTecnicosDistrito.setImmediate(false);
		absLDetTecnicosDistrito.setWidth("100.0%");
		absLDetTecnicosDistrito.setHeight("100px");
		
		// cmbDtoR
		cmbDtoR = new ComboBox();
		cmbDtoR.setCaption("Distrito de Riego");
		cmbDtoR.setImmediate(false);
		cmbDtoR.setWidth("110px");
		cmbDtoR.setHeight("25px");
		absLDetTecnicosDistrito
				.addComponent(cmbDtoR, "top:18.0px;left:10.0px;");
		
		// cmbModuloR
		cmbModuloR = new ComboBox();
		cmbModuloR.setCaption("Módulo de Riego");
		cmbModuloR.setImmediate(false);
		cmbModuloR.setWidth("450px");
		cmbModuloR.setHeight("25px");
		absLDetTecnicosDistrito.addComponent(cmbModuloR,
				"top:18.0px;left:140.0px;");
		
		// cmbSRL
		cmbSRL = new ComboBox();
		cmbSRL.setCaption("S.R.L.");
		cmbSRL.setImmediate(true);
		cmbSRL.setWidth("580px");
		cmbSRL.setHeight("25px");
		absLDetTecnicosDistrito.addComponent(cmbSRL, "top:63.0px;left:10.0px;");
		
		return absLDetTecnicosDistrito;
	}

	@AutoGenerated
	private Panel buildPanDistribucion() {
		// common part: create layout
		panDistribucion = new Panel();
		panDistribucion.setCaption("Red de Distribución");
		panDistribucion.setImmediate(false);
		panDistribucion.setWidth("601px");
		panDistribucion.setHeight("-1px");
		
		// absLDistribucion
		absLDistribucion = buildAbsLDistribucion();
		panDistribucion.setContent(absLDistribucion);
		
		return panDistribucion;
	}

	@AutoGenerated
	private AbsoluteLayout buildAbsLDistribucion() {
		// common part: create layout
		absLDistribucion = new AbsoluteLayout();
		absLDistribucion.setImmediate(false);
		absLDistribucion.setWidth("100.0%");
		absLDistribucion.setHeight("110px");
		
		// txtPrincipal
		txtPrincipal = new TextField();
		txtPrincipal.setCaption("Principal");
		txtPrincipal.setImmediate(false);
		txtPrincipal.setWidth("180px");
		txtPrincipal.setHeight("25px");
		absLDistribucion.addComponent(txtPrincipal, "top:28.0px;left:10.0px;");
		
		// txtLateral
		txtLateral = new TextField();
		txtLateral.setCaption("Lateral");
		txtLateral.setImmediate(false);
		txtLateral.setWidth("180px");
		txtLateral.setHeight("25px");
		absLDistribucion.addComponent(txtLateral, "top:28.0px;left:210.0px;");
		
		// txtSublateral
		txtSublateral = new TextField();
		txtSublateral.setCaption("Sublateral");
		txtSublateral.setImmediate(false);
		txtSublateral.setWidth("180px");
		txtSublateral.setHeight("25px");
		absLDistribucion
				.addComponent(txtSublateral, "top:28.0px;left:410.0px;");
		
		// txtRamal
		txtRamal = new TextField();
		txtRamal.setCaption("Ramal");
		txtRamal.setImmediate(false);
		txtRamal.setWidth("180px");
		txtRamal.setHeight("25px");
		absLDistribucion.addComponent(txtRamal, "top:73.0px;left:10.0px;");
		
		// txtSubramal
		txtSubramal = new TextField();
		txtSubramal.setCaption("Subramal");
		txtSubramal.setImmediate(false);
		txtSubramal.setWidth("180px");
		txtSubramal.setHeight("25px");
		absLDistribucion.addComponent(txtSubramal, "top:73.0px;left:210.0px;");
		
		// txtRegadera
		txtRegadera = new TextField();
		txtRegadera.setCaption("Regadera");
		txtRegadera.setImmediate(false);
		txtRegadera.setWidth("180px");
		txtRegadera.setHeight("25px");
		absLDistribucion.addComponent(txtRegadera, "top:73.0px;left:410.0px;");
		
		return absLDistribucion;
	}

	@AutoGenerated
	private Panel buildPanCoordenadas() {
		// common part: create layout
		panCoordenadas = new Panel();
		panCoordenadas.setCaption("Coordenadas");
		panCoordenadas.setImmediate(false);
		panCoordenadas.setWidth("601px");
		panCoordenadas.setHeight("-1px");
		
		// absLCoordenadas
		absLCoordenadas = buildAbsLCoordenadas();
		panCoordenadas.setContent(absLCoordenadas);
		
		return panCoordenadas;
	}

	@AutoGenerated
	private AbsoluteLayout buildAbsLCoordenadas() {
		// common part: create layout
		absLCoordenadas = new AbsoluteLayout();
		absLCoordenadas.setImmediate(false);
		absLCoordenadas.setWidth("100.0%");
		absLCoordenadas.setHeight("200px");
		
		// lblNorte
		lblNorte = new Label();
		lblNorte.setImmediate(false);
		lblNorte.setWidth("-1px");
		lblNorte.setHeight("-1px");
		lblNorte.setValue("Punto Norte:");
		absLCoordenadas.addComponent(lblNorte, "top:12.0px;left:10.0px;");
		
		// txtNorteX
		txtNorteX = new TextField();
		txtNorteX.setCaption("Coordenada X");
		txtNorteX.setImmediate(false);
		txtNorteX.setWidth("235px");
		txtNorteX.setHeight("25px");
		absLCoordenadas.addComponent(txtNorteX, "top:28.0px;left:100.0px;");
		
		// txtNorteY
		txtNorteY = new TextField();
		txtNorteY.setCaption("Coordenada Y");
		txtNorteY.setImmediate(false);
		txtNorteY.setWidth("235px");
		txtNorteY.setHeight("25px");
		absLCoordenadas.addComponent(txtNorteY, "top:28.0px;left:355.0px;");
		
		// lblSur
		lblSur = new Label();
		lblSur.setImmediate(false);
		lblSur.setWidth("-1px");
		lblSur.setHeight("-1px");
		lblSur.setValue("Punto Sur:");
		absLCoordenadas.addComponent(lblSur, "top:57.0px;left:10.0px;");
		
		// txtSurX
		txtSurX = new TextField();
		txtSurX.setCaption("Coordenada X");
		txtSurX.setImmediate(false);
		txtSurX.setWidth("235px");
		txtSurX.setHeight("25px");
		absLCoordenadas.addComponent(txtSurX, "top:73.0px;left:100.0px;");
		
		// txtSurY
		txtSurY = new TextField();
		txtSurY.setCaption("Coordenada Y");
		txtSurY.setImmediate(false);
		txtSurY.setWidth("235px");
		txtSurY.setHeight("25px");
		absLCoordenadas.addComponent(txtSurY, "top:73.0px;left:355.0px;");
		
		// lblEste
		lblEste = new Label();
		lblEste.setImmediate(false);
		lblEste.setWidth("-1px");
		lblEste.setHeight("-1px");
		lblEste.setValue("Punto Este:");
		absLCoordenadas.addComponent(lblEste, "top:102.0px;left:10.0px;");
		
		// txtEsteX
		txtEsteX = new TextField();
		txtEsteX.setCaption("Coordenada X");
		txtEsteX.setImmediate(false);
		txtEsteX.setWidth("235px");
		txtEsteX.setHeight("25px");
		absLCoordenadas.addComponent(txtEsteX, "top:118.0px;left:100.0px;");
		
		// txtEsteY
		txtEsteY = new TextField();
		txtEsteY.setCaption("Coordenada Y");
		txtEsteY.setImmediate(false);
		txtEsteY.setWidth("235px");
		txtEsteY.setHeight("25px");
		absLCoordenadas.addComponent(txtEsteY, "top:118.0px;left:355.0px;");
		
		// lblOeste
		lblOeste = new Label();
		lblOeste.setImmediate(false);
		lblOeste.setWidth("-1px");
		lblOeste.setHeight("-1px");
		lblOeste.setValue("Punto Oeste:");
		absLCoordenadas.addComponent(lblOeste, "top:147.0px;left:10.0px;");
		
		// txtOesteX
		txtOesteX = new TextField();
		txtOesteX.setCaption("Coordenada X");
		txtOesteX.setImmediate(false);
		txtOesteX.setWidth("235px");
		txtOesteX.setHeight("25px");
		absLCoordenadas.addComponent(txtOesteX, "top:163.0px;left:100.0px;");
		
		// txtOesteY
		txtOesteY = new TextField();
		txtOesteY.setCaption("Coordenada Y");
		txtOesteY.setImmediate(false);
		txtOesteY.setWidth("235px");
		txtOesteY.setHeight("25px");
		absLCoordenadas.addComponent(txtOesteY, "top:163.0px;left:355.0px;");
		
		return absLCoordenadas;
	}

	@AutoGenerated
	private Panel buildPanObservaciones() {
		// common part: create layout
		panObservaciones = new Panel();
		panObservaciones.setCaption("Observaciones");
		panObservaciones.setImmediate(false);
		panObservaciones.setWidth("601px");
		panObservaciones.setHeight("-1px");
		
		// absLObservaciones
		absLObservaciones = buildAbsLObservaciones();
		panObservaciones.setContent(absLObservaciones);
		
		return panObservaciones;
	}

	@AutoGenerated
	private AbsoluteLayout buildAbsLObservaciones() {
		// common part: create layout
		absLObservaciones = new AbsoluteLayout();
		absLObservaciones.setImmediate(false);
		absLObservaciones.setWidth("100.0%");
		absLObservaciones.setHeight("120px");
		
		// txtObservaciones
		txtObservaciones = new TextArea();
		txtObservaciones.setImmediate(false);
		txtObservaciones.setWidth("580px");
		txtObservaciones.setHeight("100px");
		absLObservaciones.addComponent(txtObservaciones,
				"top:10.0px;left:10.0px;");
		
		return absLObservaciones;
	}

	@AutoGenerated
	private AbsoluteLayout buildAbsLBotones() {
		// common part: create layout
		absLBotones = new AbsoluteLayout();
		absLBotones.setImmediate(false);
		absLBotones.setWidth("601px");
		absLBotones.setHeight("30px");
		
		// btnGuardar
		btnGuardar = new Button();
		btnGuardar.setCaption("Guardar");
		btnGuardar.setImmediate(true);
		btnGuardar.setWidth("-1px");
		btnGuardar.setHeight("-1px");
		absLBotones.addComponent(btnGuardar, "right:0.0px;bottom:0.0px;");
		
		// horLBotones
		horLBotones = buildHorLBotones();
		absLBotones.addComponent(horLBotones, "bottom:0.0px;left:0.0px;");
		
		return absLBotones;
	}

	@AutoGenerated
	private HorizontalLayout buildHorLBotones() {
		// common part: create layout
		horLBotones = new HorizontalLayout();
		horLBotones.setImmediate(false);
		horLBotones.setWidth("-1px");
		horLBotones.setHeight("-1px");
		horLBotones.setMargin(false);
		horLBotones.setSpacing(true);
		
		// btnNuevo
		btnNuevo = new Button();
		btnNuevo.setCaption("Agregar Nuevo");
		btnNuevo.setImmediate(true);
		btnNuevo.setWidth("-1px");
		btnNuevo.setHeight("-1px");
		horLBotones.addComponent(btnNuevo);
		
		// btnVolver
		btnVolver = new Button();
		btnVolver.setCaption("Volver");
		btnVolver.setImmediate(true);
		btnVolver.setWidth("-1px");
		btnVolver.setHeight("-1px");
		horLBotones.addComponent(btnVolver);
		
		return horLBotones;
	}
	
	//endregion
}