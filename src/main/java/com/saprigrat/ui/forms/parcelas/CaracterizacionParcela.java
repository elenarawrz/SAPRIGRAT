package com.saprigrat.ui.forms.parcelas;

import java.sql.Date;
import java.util.Arrays;
import java.util.LinkedList;

import org.vaadin.dialogs.ConfirmDialog;

import com.saprigrat.entities.Usuario;
import com.saprigrat.enums.TipoUsuario;
import com.saprigrat.ui.interfaces.FormParcela;
import com.saprigrat.ui.interfaces.Formulario;
import com.vaadin.annotations.AutoGenerated;
import com.vaadin.data.Property.ValueChangeEvent;
import com.vaadin.data.Property.ValueChangeListener;
import com.vaadin.data.validator.RegexpValidator;
import com.vaadin.event.ItemClickEvent;
import com.vaadin.event.ItemClickEvent.ItemClickListener;
import com.vaadin.event.ShortcutAction.KeyCode;
import com.vaadin.event.ShortcutAction.ModifierKey;
import com.vaadin.shared.ui.combobox.FilteringMode;
import com.vaadin.shared.ui.datefield.Resolution;
import com.vaadin.ui.AbsoluteLayout;
import com.vaadin.ui.Alignment;
import com.vaadin.ui.Button;
import com.vaadin.ui.Button.ClickEvent;
import com.vaadin.ui.Button.ClickListener;
import com.vaadin.ui.CheckBox;
import com.vaadin.ui.ComboBox;
import com.vaadin.ui.CustomComponent;
import com.vaadin.ui.DateField;
import com.vaadin.ui.HorizontalLayout;
import com.vaadin.ui.Label;
import com.vaadin.ui.Panel;
import com.vaadin.ui.Table;
import com.vaadin.ui.TextField;
import com.vaadin.ui.VerticalLayout;

@SuppressWarnings("serial")
public class CaracterizacionParcela extends CustomComponent implements Formulario, FormParcela
{
	/*- VaadinEditorProperties={"grid":"RegularGrid,20","showGrid":true,"snapToGrid":true,"snapToObject":true,"movingGuides":false,"snappingDistance":10} */
	//region controles autogenerados
	
	@AutoGenerated
	private VerticalLayout mainLayout;
	@AutoGenerated
	private AbsoluteLayout absLBotones;
	@AutoGenerated
	private HorizontalLayout horLBotones;
	@AutoGenerated
	private Button btnVolver;
	@AutoGenerated
	private Button btnNuevo;
	@AutoGenerated
	private Button btnGuardar;
	@AutoGenerated
	private VerticalLayout verLDatos;
	@AutoGenerated
	private HorizontalLayout horLCultivo;
	@AutoGenerated
	private Panel panCultivoAct;
	@AutoGenerated
	private AbsoluteLayout absLCultivoAct;
	@AutoGenerated
	private DateField datCosecha;
	@AutoGenerated
	private DateField datSiembra;
	@AutoGenerated
	private AbsoluteLayout absLRendimiento;
	@AutoGenerated
	private Label lblRendimiento;
	@AutoGenerated
	private TextField txtRendimiento;
	@AutoGenerated
	private CheckBox chkTerminoCiclo;
	@AutoGenerated
	private TextField txtCultivo;
	@AutoGenerated
	private ComboBox cmbCiclo;
	@AutoGenerated
	private Panel panCultivoAnt;
	@AutoGenerated
	private AbsoluteLayout absLCultivoAnt;
	@AutoGenerated
	private DateField datCosechaAnt;
	@AutoGenerated
	private DateField datSiembraAnt;
	@AutoGenerated
	private Label lblRendimientoAnt;
	@AutoGenerated
	private TextField txtRendimientoAnt;
	@AutoGenerated
	private TextField txtCultivoAnt;
	@AutoGenerated
	private ComboBox cmbCicloAnt;
	@AutoGenerated
	private Panel panCaracteristicas;
	@AutoGenerated
	private VerticalLayout verLCaracteristicas;
	@AutoGenerated
	private AbsoluteLayout absLCaracteristicas6;
	@AutoGenerated
	private Label lblPendiente;
	@AutoGenerated
	private TextField txtPendiente;
	@AutoGenerated
	private Label lblParamHF;
	@AutoGenerated
	private TextField txtParamHF;
	@AutoGenerated
	private Label lblAnchoTendido;
	@AutoGenerated
	private TextField txtAnchoTendido;
	@AutoGenerated
	private AbsoluteLayout absLCaracteristicas5;
	@AutoGenerated
	private Label lblLimo;
	@AutoGenerated
	private TextField txtLimo;
	@AutoGenerated
	private Label lblCondHidSat;
	@AutoGenerated
	private TextField txtCondHidSat;
	@AutoGenerated
	private Label lblAnchoSurco;
	@AutoGenerated
	private TextField txtAnchoSurco;
	@AutoGenerated
	private AbsoluteLayout absLCaracteristicas4;
	@AutoGenerated
	private Label lblArcilla;
	@AutoGenerated
	private TextField txtArcilla;
	@AutoGenerated
	private Label lblHumPMP;
	@AutoGenerated
	private TextField txtHumPMP;
	@AutoGenerated
	private Label lblSupRegada;
	@AutoGenerated
	private TextField txtSupRegada;
	@AutoGenerated
	private AbsoluteLayout absLCaracteristicas3;
	@AutoGenerated
	private Label lblArena;
	@AutoGenerated
	private TextField txtArena;
	@AutoGenerated
	private Label lblHumCC;
	@AutoGenerated
	private TextField txtHumCC;
	@AutoGenerated
	private Label lblAncho;
	@AutoGenerated
	private TextField txtAncho;
	@AutoGenerated
	private AbsoluteLayout absLCaracteristicas2;
	@AutoGenerated
	private Label lblDensidad;
	@AutoGenerated
	private TextField txtDensidad;
	@AutoGenerated
	private Label lblHumSat;
	@AutoGenerated
	private TextField txtHumSat;
	@AutoGenerated
	private Label lblLongitud;
	@AutoGenerated
	private TextField txtLongitud;
	@AutoGenerated
	private AbsoluteLayout absLCaracteristicas1;
	@AutoGenerated
	private Label lblRugosidad;
	@AutoGenerated
	private TextField txtRugosidad;
	@AutoGenerated
	private ComboBox cmbTipoSuelo;
	@AutoGenerated
	private HorizontalLayout horLParcelaNivelacion;
	@AutoGenerated
	private Panel panNivelacion;
	@AutoGenerated
	private VerticalLayout verLNivelacion;
	@AutoGenerated
	private AbsoluteLayout absLNivelacionNo;
	@AutoGenerated
	private CheckBox chkProyecto;
	@AutoGenerated
	private CheckBox chkRequiere;
	@AutoGenerated
	private AbsoluteLayout absLNivelacion;
	@AutoGenerated
	private DateField datNivelacion;
	@AutoGenerated
	private CheckBox chkNivelada;
	@AutoGenerated
	private AbsoluteLayout absLTrazo;
	@AutoGenerated
	private CheckBox chkTrazo;
	@AutoGenerated
	private Panel panParcela;
	@AutoGenerated
	private AbsoluteLayout absLParcela;
	@AutoGenerated
	private ComboBox cmbParcela;
	@AutoGenerated
	private VerticalLayout verLListado;
	@AutoGenerated
	private Label lblRowCount;
	@AutoGenerated
	private Table tblListado;
	@AutoGenerated
	private HorizontalLayout horLRespProd;
	@AutoGenerated
	private Panel panProductor;
	@AutoGenerated
	private AbsoluteLayout absLProductor;
	@AutoGenerated
	private ComboBox cmbProductor;
	@AutoGenerated
	private Panel panResponsable;
	@AutoGenerated
	private AbsoluteLayout absLResponsable;
	@AutoGenerated
	private ComboBox cmbResponsable;
	//endregion
	private Usuario usuario;
	private int idCaracterizacionParcela;
	
	//region eventos
	private ClickListener guardarListener = new ClickListener()
			{
				@Override
				public void buttonClick(ClickEvent event)
				{
					if(validar())
					{
						LinkedList<Object> valores = llenarListaDeParametros();
						if(btnGuardar.getCaption().equals("Guardar"))
						{
							valores.add(0, cmbParcela.getValue());
							
							String status = datos.registrarCaracterizacion(valores);
							if(!status.isEmpty() && status.indexOf("err") == -1)
							{
								u.msjGuardado("La caracterización de la parcela", "");
								//Se cambia a modo de modificación
								setTipo(MODO_MODIFICAR);
								idCaracterizacionParcela = Integer.parseInt(status);
							}
							else
								u.msjNoGuardado("la caracterización de la parcela");
						}
						else
						{
							valores.add(0, idCaracterizacionParcela);
							
							String status = datos.modificarCaracterizacion(valores);
							if(!status.isEmpty() && status.indexOf("err") == -1)
								u.msjModificado("La caracterización de la parcela");
							else
								u.msjNoModificado("la caracterización de la parcela");
						}
					}
				}
			};
	private ItemClickListener llenarFormListener = new ItemClickListener()
			{
				@Override
				public void itemClick(ItemClickEvent event)
				{
					if(event.isDoubleClick())
					{
						idCaracterizacionParcela = (Integer)event.getItem().getItemProperty("ID").getValue();
						llenarFormulario();
					}
				}
			};
	private ValueChangeListener llenarTablaOProductoresListener = new ValueChangeListener()
			{
				@Override
				public void valueChange(ValueChangeEvent event)
				{
					String curr = ((String)cmbResponsable.getValue()).split(" ")[0];
					if(verLListado.isVisible())
						u.llenarTabla(tblListado, datos.getCaracterizaciones(curr), "registro de caracterización de parcela");
					else
					{
						cmbParcela.removeAllItems();
						u.llenarCombo(cmbProductor, datos.getRespProductores(curr));
					}
				}
			};
	private ClickListener nuevoListener = new ClickListener()
			{
				@Override
				public void buttonClick(ClickEvent event)
				{
					if(!verLListado.isVisible())
						showDialog(MODO_AGREGAR);
					else
						resetForm(MODO_AGREGAR);
				}
			};
	private ClickListener listadoListener = new ClickListener()
			{
				@Override
				public void buttonClick(ClickEvent event)
				{
					showDialog(MODO_LISTA);
				}
			};
	private ValueChangeListener llenarParcelasListener = new ValueChangeListener()
			{
				@Override
				public void valueChange(ValueChangeEvent event)
				{
					if(cmbProductor.size() != 0)
					{
						u.llenarCombo(cmbParcela, datos.getCtasPadron(((String)cmbProductor.getValue()).split(" ")[0]));
						if(cmbParcela.size() == 0)
							u.notificar("No se podrá agregar el registro ya que este " + TipoUsuario.PRODUCTOR + " no tiene asociada ninguna parcela", null, u.MSJ_ERROR);
					}
					else
						u.notificar("No se podrá agregar el registro ya que este " + TipoUsuario.RESPONSABLE_TECNICO + " no tiene asignado a ningún " + TipoUsuario.PRODUCTOR, null, u.MSJ_ERROR);
				}
			};
	private ValueChangeListener fueNiveladaListener = new ValueChangeListener()
			{
				@Override
				public void valueChange(ValueChangeEvent event)
				{
					if(chkNivelada.getValue())
						datNivelacion.setVisible(true);
					else
					{
						datNivelacion.setVisible(false);
						datNivelacion.setValue(null);
					}
				}
			};
	private ValueChangeListener requiereNivelarListener = new ValueChangeListener()
			{
				@Override
				public void valueChange(ValueChangeEvent event)
				{
					if(chkRequiere.getValue())
						chkProyecto.setVisible(true);
					else
					{
						chkProyecto.setVisible(false);
						chkProyecto.setValue(false);
					}
				}
			};
	private ValueChangeListener terminoCicloListener = new ValueChangeListener()
			{
				@Override
				public void valueChange(ValueChangeEvent event)
				{
					if(chkTerminoCiclo.getValue())
						absLRendimiento.setVisible(true);
					else
					{
						absLRendimiento.setVisible(false);
						txtRendimiento.setValue("");
					}
				}
			};
	//endregion
	
	public CaracterizacionParcela() {}
	public CaracterizacionParcela(Usuario user) { init(user); }

	@Override
	public void init(Usuario user)
	{
		usuario = user;
	}

	@Override
	public void inicializar()
	{
		buildMainLayout();
		setCompositionRoot(mainLayout);
		
		//Variables
		LinkedList<String>ciclos = new LinkedList<String>();
		ciclos.add("Primavera-Verano");
		ciclos.add("Otoño-Invierno");
		ciclos.add("Perene");
		//Comboboxes
		u.setupCombo(cmbResponsable, null, "Busque por nombre o CURR.", FilteringMode.CONTAINS, false, true);
		u.setupCombo(cmbProductor, null, "Busque por nombre o CURR.", FilteringMode.CONTAINS, false, true);
		u.setupCombo(cmbParcela, null, "Busque por número de cuenta de padrón.", null, false, true);
		u.setupCombo(cmbTipoSuelo, datos.getTipoSuelo(), null, null, false, false);
		u.setupCombo(cmbCiclo, ciclos, null, null, false, true);
		u.setupCombo(cmbCicloAnt, ciclos, null, null, false, true);
		cmbResponsable.addValueChangeListener(llenarTablaOProductoresListener);
		cmbProductor.addValueChangeListener(llenarParcelasListener);
		//Datefields
		datNivelacion.setResolution(Resolution.MONTH);
		datNivelacion.setVisible(false);
		//Checkboxes
		chkProyecto.setVisible(false);
		chkNivelada.addValueChangeListener(fueNiveladaListener);
		chkRequiere.addValueChangeListener(requiereNivelarListener);
		chkTerminoCiclo.addValueChangeListener(terminoCicloListener);
		//Buttons
		btnNuevo.addClickListener(nuevoListener);
		btnVolver.addClickListener(listadoListener);
		btnGuardar.addClickListener(guardarListener);
		//Tables
		tblListado.setSelectable(true);
		tblListado.setSortEnabled(true);
		tblListado.setColumnCollapsingAllowed(true);
		tblListado.addItemClickListener(llenarFormListener);
		//Layouts
		absLRendimiento.setVisible(false);
		//Inicializar en modo lista
		//setTipo(MODO_LISTA);
		//Agregar las validaciones necesarias
		setValidaciones();
	}

	@Override
	public void setTipo(int modoOperacion)
	{
		btnNuevo.setClickShortcut(KeyCode.N, ModifierKey.ALT);
		if(modoOperacion == MODO_LISTA)
		{
			setResponsableTecnico(usuario.getTipo());
			mostrarTabla(true);
			btnGuardar.removeClickShortcut();
			btnGuardar.setVisible(false);
			btnVolver.removeClickShortcut();
			btnVolver.setVisible(false);
			btnNuevo.setCaption("Agregar Nuevo");
		}
		else
		{
			mostrarTabla(false);
			btnGuardar.setClickShortcut(KeyCode.G, ModifierKey.ALT);
			btnGuardar.setVisible(true);
			btnVolver.setClickShortcut(KeyCode.V, ModifierKey.ALT);
			btnVolver.setVisible(true);
			
			if(modoOperacion == MODO_AGREGAR)
			{
				elementosIdHabilitados(true);
				btnGuardar.setCaption("Guardar");
				btnNuevo.setClickShortcut(KeyCode.L, ModifierKey.ALT);
				btnNuevo.setCaption("Limpiar");
			}
			else
			{
				elementosIdHabilitados(false);
				btnGuardar.setCaption("Guardar cambios");
				btnNuevo.setCaption("Agregar Nuevo");
			}
		}
	}
	
	@Override
	public void quitarListeners ()
	{
		cmbResponsable.removeValueChangeListener(llenarTablaOProductoresListener);
		cmbProductor.removeValueChangeListener(llenarParcelasListener);
		
		horLRespProd.setVisible(false);
		horLBotones.setVisible(false);
		
		horLParcelaNivelacion.removeComponent(panParcela);
		horLParcelaNivelacion.setComponentAlignment(panNivelacion, new Alignment(5));
	}

	@Override
	public void setParcela (int idParcela, String padron)
	{
		u.llenarCombo(cmbParcela, padron);
		idCaracterizacionParcela = datos.getIdCaracterizacionByParcela(idParcela);
		if(idCaracterizacionParcela > 0)
			llenarFormulario();
		else
			setTipo(MODO_AGREGAR);
	}

	@Override
	public void setResponsable (String responsable)
	{
		u.llenarCombo(cmbResponsable, responsable);
	}

	@Override
	public void setProductor (String productor)
	{
		u.llenarCombo(cmbProductor, productor);
	}

	private void setResponsableTecnico(int tipoAgregando)
	{
		if(tipoAgregando != usuario.RESPONSABLE)
			u.llenarCombo(cmbResponsable, datos.getRespTecnicos(usuario.getCURR(), tipoAgregando, usuario.RESPONSABLE));
		else
			u.llenarCombo(cmbResponsable, usuario.getCURR() + " " + usuario.getNombre() + " " +
						  usuario.getApPaterno() + " " + usuario.getApMaterno());
		if(cmbResponsable.size() == 0)
		{
			mainLayout.removeAllComponents();
			u.notificar("Imposible registrar caracterización, se requiere que exista al menos una parcela a caracterizar", null, u.MSJ_ERROR);
		}
	}
	
	private void mostrarTabla(boolean estado)
	{
		panProductor.setVisible(!estado);
		verLListado.setVisible(estado);
		verLDatos.setVisible(!estado);
	}
	
	private void elementosIdHabilitados(boolean habilitado)
	{
		cmbResponsable.setEnabled(habilitado);
		cmbProductor.setEnabled(habilitado);
		cmbParcela.setEnabled(habilitado);
	}
	
	private void setValidaciones()
	{
		RegexpValidator esDecimal = u.getRegExDecimal();
		
		txtLongitud.addValidator(esDecimal);
		txtAncho.addValidator(esDecimal);
		txtSupRegada.addValidator(esDecimal);
		txtAnchoSurco.addValidator(esDecimal);
		txtAnchoTendido.addValidator(esDecimal);
		txtHumSat.addValidator(esDecimal);
		txtHumCC.addValidator(esDecimal);
		txtHumPMP.addValidator(esDecimal);
		txtCondHidSat.addValidator(esDecimal);
		txtParamHF.addValidator(esDecimal);
		txtRugosidad.addValidator(esDecimal);
		txtDensidad.addValidator(esDecimal);
		txtArena.addValidator(esDecimal);
		txtArcilla.addValidator(esDecimal);
		txtLimo.addValidator(esDecimal);
		txtPendiente.addValidator(esDecimal);
		
		txtRendimiento.addValidator(esDecimal);
		
		txtRendimientoAnt.addValidator(esDecimal);
	}

	private boolean validar()
	{
		if(cmbResponsable.getValue() == null)
			return u.notificar("Se requiere especificar el responsable técnico", cmbResponsable, u.MSJ_ERROR);
		if(cmbProductor.getValue() == null)
			return u.notificar("Se requiere especificar el usuario", cmbProductor, u.MSJ_ERROR);
		if(cmbParcela.getValue() == null)
			return u.notificar("Se requiere especificar la parcela", cmbParcela, u.MSJ_ERROR);

		if(chkNivelada.getValue() && datNivelacion.getValue() == null)
			return u.notificar("Se requiere especificar la fecha en que fue nivelada", datNivelacion, u.MSJ_ERROR);

		if(cmbTipoSuelo.getValue() == null)
			return u.notificar("Se requiere especificar el tipo de suelo", cmbTipoSuelo, u.MSJ_ERROR);
		if(txtLongitud.getValue().isEmpty())
			return u.notificar("Se requiere especificar la longitud de la parcela", txtLongitud, u.MSJ_ERROR);
		if(txtAncho.getValue().isEmpty())
			return u.notificar("Se requiere especificar el ancho de la parcela", txtAncho, u.MSJ_ERROR);
		if(txtSupRegada.getValue().isEmpty())
			return u.notificar("Se requiere especificar la superficie regada", txtSupRegada, u.MSJ_ERROR);
		if(txtAnchoSurco.getValue().isEmpty())
			return u.notificar("Se requiere especificar el ancho del surco", txtAnchoSurco, u.MSJ_ERROR);
		if(txtAnchoTendido.getValue().isEmpty())
			return u.notificar("Se requiere especificar el ancho del tendido", txtAnchoTendido, u.MSJ_ERROR);
		if(txtHumSat.getValue().isEmpty())
			return u.notificar("Se requiere especificar el contenido de humedad a saturación", txtHumSat, u.MSJ_ERROR);
		if(txtHumCC.getValue().isEmpty())
			return u.notificar("Se requiere especificar el contenido de humedad a CC", txtHumCC, u.MSJ_ERROR);
		if(txtHumPMP.getValue().isEmpty())
			return u.notificar("Se requiere especificar el contenido de humedad a PMP", txtHumPMP, u.MSJ_ERROR);
		if(txtCondHidSat.getValue().isEmpty())
			return u.notificar("Se requiere especificar la conductividad hidráulica a saturación", txtCondHidSat, u.MSJ_ERROR);
		if(txtParamHF.getValue().isEmpty())
			return u.notificar("Se requiere especificar el parámetro HF", txtParamHF, u.MSJ_ERROR);
		if(txtRugosidad.getValue().isEmpty())
			return u.notificar("Se requiere especificar la rugosidad del suelo", txtRugosidad, u.MSJ_ERROR);
		if(txtDensidad.getValue().isEmpty())
			return u.notificar("Se requiere especificar la densidad aparente", txtDensidad, u.MSJ_ERROR);
		if(txtArena.getValue().isEmpty())
			return u.notificar("Se requiere especificar el porcentaje de arena", txtArena, u.MSJ_ERROR);
		if(txtArcilla.getValue().isEmpty())
			return u.notificar("Se requiere especificar el porcentaje de arcilla", txtArcilla, u.MSJ_ERROR);
		if(txtLimo.getValue().isEmpty())
			return u.notificar("Se requiere especificar el porcentaje de limo", txtLimo, u.MSJ_ERROR);
		if(txtPendiente.getValue().isEmpty())
			return u.notificar("Se requiere especificar el porcentaje de pendiente", txtPendiente, u.MSJ_ERROR);

		/*if(cmbCicloAnt.getValue() == null)
			return notificar("Se requiere especificar el ciclo del cultivo anterior", cmbCicloAnt);
		if(txtCultivoAnt.getValue().isEmpty())
			return notificar("Se requiere especificar la variedad del cultivo anterior", txtCultivoAnt);
		if(txtRendimientoAnt.getValue().isEmpty())
			return notificar("Se requiere especificar el rendimiento del cultivo anterior", txtRendimientoAnt);
		if(datSiembraAnt.getValue() == null)
			return notificar("Se requiere especificar la fecha de siembra del cultivo anterior", datSiembraAnt);
		if(datCosechaAnt.getValue() == null)
			return notificar("Se requiere especificar la fecha de cosecha del cultivo anterior", datCosechaAnt);*/
		
		if(cmbCiclo.getValue() == null)
			return u.notificar("Se requiere especificar el ciclo del cultivo actual", cmbCiclo, u.MSJ_ERROR);
		if(txtCultivo.getValue().isEmpty())
			return u.notificar("Se requiere especificar la variedad del cultivo actual", txtCultivo, u.MSJ_ERROR);
		if(chkTerminoCiclo.getValue() && txtRendimiento.getValue().isEmpty())
			return u.notificar("Se requiere especificar el rendimiento del cultivo actual", txtRendimiento, u.MSJ_ERROR);
		if(datSiembra.getValue() == null)
			return u.notificar("Se requiere especificar la fecha de siembra del cultivo actual", datSiembra, u.MSJ_ERROR);
		if(datCosecha.getValue() == null)
			return u.notificar("Se requiere especificar la fecha de cosecha del cultivo actual", datCosecha, u.MSJ_ERROR);

		if(!(txtLongitud.isValid() && txtAncho.isValid() && txtSupRegada.isValid() &&
			txtAnchoSurco.isValid() && txtAnchoTendido.isValid() && txtHumSat.isValid() &&
			txtHumCC.isValid() && txtHumPMP.isValid() && txtCondHidSat.isValid() &&
			txtParamHF.isValid() && txtRugosidad.isValid() && txtDensidad.isValid() &&
			txtArena.isValid() && txtArcilla.isValid() && txtLimo.isValid() &&
			txtPendiente.isValid() && txtRendimiento.isValid() && txtRendimientoAnt.isValid() ))
			return u.notificar("Los valores indicados deben ser estríctamente numéricos", txtLongitud, u.MSJ_ERROR);
		
		return true;
	}

	private LinkedList<Object> llenarListaDeParametros()
	{
		LinkedList<Object> valores = new LinkedList<Object>();
		valores.add(chkNivelada.getValue());
		if(chkNivelada.getValue())
			valores.add(u.fechaUtilToSQL(datNivelacion.getValue()));
		valores.add(chkRequiere.getValue());
		valores.add(chkRequiere.getValue() && chkProyecto.getValue());
		valores.add(chkTrazo.getValue());
		valores.add(cmbTipoSuelo.getValue());
		valores.add(Double.parseDouble(txtLongitud.getValue()));
		valores.add(Double.parseDouble(txtAncho.getValue()));
		valores.add(Double.parseDouble(txtSupRegada.getValue()));
		valores.add(Double.parseDouble(txtAnchoSurco.getValue()));
		valores.add(Double.parseDouble(txtAnchoTendido.getValue()));
		valores.add(Double.parseDouble(txtHumSat.getValue()));
		valores.add(Double.parseDouble(txtHumCC.getValue()));
		valores.add(Double.parseDouble(txtHumPMP.getValue()));
		valores.add(Double.parseDouble(txtCondHidSat.getValue()));
		valores.add(Double.parseDouble(txtParamHF.getValue()));
		valores.add(Double.parseDouble(txtRugosidad.getValue()));
		valores.add(Double.parseDouble(txtDensidad.getValue()));
		valores.add(Double.parseDouble(txtArena.getValue()));
		valores.add(Double.parseDouble(txtArcilla.getValue()));
		valores.add(Double.parseDouble(txtLimo.getValue()));
		valores.add(Double.parseDouble(txtPendiente.getValue()));
		valores.add(cmbCiclo.getValue());
		valores.add(txtCultivo.getValue());
		valores.add(chkTerminoCiclo.getValue());
		valores.add(chkTerminoCiclo.getValue() ? Double.parseDouble(txtRendimiento.getValue()) : 0);
		valores.add(u.fechaUtilToSQL(datSiembra.getValue()));
		valores.add(u.fechaUtilToSQL(datCosecha.getValue()));
		valores.add(cmbCicloAnt.getValue());
		valores.add(txtCultivoAnt.getValue());
		valores.add(Double.parseDouble(txtRendimientoAnt.getValue()));
		valores.add(u.fechaUtilToSQL(datSiembraAnt.getValue()));
		valores.add(u.fechaUtilToSQL(datCosechaAnt.getValue()));
		
		return valores;
	}
	
	private void llenarFormulario ()
	{
		LinkedList<Object> valores = datos.getCaracterizacion(idCaracterizacionParcela);
		if(!valores.isEmpty())
		{
			setTipo(MODO_MODIFICAR);
			
			u.llenarCombo(cmbProductor, datos.getRespProductores(((String)cmbResponsable.getValue()).split(" ")[0]));
			cmbProductor.setValue(valores.remove());
			u.llenarCombo(cmbParcela, datos.getCtasPadron(((String)cmbProductor.getValue()).split(" ")[0]));
			cmbParcela.setValue(valores.remove());
			llenarDatos (valores);
		}
		else
			u.msjRegistroNoObtenido();
	}
	
	public void setupNuevo()
	{
		Object[] arr = { false, null, false, false, false,
						 null, "", "", "", "",
						 "", "", "", "", "",
						 "", "", "", "", "",
						 "", "", null, "", false,
						 "", null, null, null, "",
						 "", null, null };
		llenarDatos (new LinkedList<Object>(Arrays.asList(arr)));
		setTipo(MODO_AGREGAR);
	}
	
	private void llenarDatos (LinkedList<Object> valores)
	{
		chkNivelada.setValue((Boolean)valores.remove());
		datNivelacion.setValue(u.fechaSQLToUtil((Date)valores.remove()));
		chkRequiere.setValue((Boolean)valores.remove());
		chkProyecto.setValue((Boolean)valores.remove());
		chkTrazo.setValue((Boolean)valores.remove());
		cmbTipoSuelo.setValue(valores.remove());
		txtLongitud.setValue(valores.remove() + "");
		txtAncho.setValue(valores.remove() + "");
		txtSupRegada.setValue(valores.remove() + "");
		txtAnchoSurco.setValue(valores.remove() + "");
		txtAnchoTendido.setValue(valores.remove() + "");
		txtHumSat.setValue(valores.remove() + "");
		txtHumCC.setValue(valores.remove() + "");
		txtHumPMP.setValue(valores.remove() + "");
		txtCondHidSat.setValue(valores.remove() + "");
		txtParamHF.setValue(valores.remove() + "");
		txtRugosidad.setValue(valores.remove() + "");
		txtDensidad.setValue(valores.remove() + "");
		txtArena.setValue(valores.remove() + "");
		txtArcilla.setValue(valores.remove() + "");
		txtLimo.setValue(valores.remove() + "");
		txtPendiente.setValue(valores.remove() + "");
		cmbCiclo.setValue(valores.remove());
		txtCultivo.setValue((String)valores.remove());
		Object terminoCiclo = valores.remove();
		chkTerminoCiclo.setValue(terminoCiclo != null ? (Boolean)terminoCiclo : false);
		txtRendimiento.setValue(valores.remove() + "");
		datSiembra.setValue(u.fechaSQLToUtil((Date)valores.remove()));
		datCosecha.setValue(u.fechaSQLToUtil((Date)valores.remove()));
		cmbCicloAnt.setValue(valores.remove());
		txtCultivoAnt.setValue((String)valores.remove());
		txtRendimientoAnt.setValue(valores.remove() + "");
		datSiembraAnt.setValue(u.fechaSQLToUtil((Date)valores.remove()));
		datCosechaAnt.setValue(u.fechaSQLToUtil((Date)valores.remove()));
	}
	
	private void showDialog(final int modo)
	{
		ConfirmDialog.show( this.getUI(),
							"Advertencia:",
							"Perderá todos los cambios realizados hasta el momento.\n¿Desea continuar?",
							"Si", "No",
							new ConfirmDialog.Listener()
							{
								public void onClose(ConfirmDialog dialog)
								{
									if (dialog.isConfirmed())
										resetForm(modo);
								}
							});
	}
	
	private void resetForm(int modo)
	{
		Object respSelected = cmbResponsable.getValue();
		inicializar();
		setTipo(modo);
		cmbResponsable.setValue(respSelected);
	}
	//region UI

	@AutoGenerated
	private VerticalLayout buildMainLayout() {
		// common part: create layout
		mainLayout = new VerticalLayout();
		mainLayout.setImmediate(false);
		mainLayout.setWidth("-1px");
		mainLayout.setHeight("-1px");
		mainLayout.setMargin(true);
		mainLayout.setSpacing(true);
		
		// top-level component properties
		setWidth("-1px");
		setHeight("-1px");
		
		// horLRespProd
		horLRespProd = buildHorLRespProd();
		mainLayout.addComponent(horLRespProd);
		
		// verLListado
		verLListado = buildVerLListado();
		mainLayout.addComponent(verLListado);
		
		// verLDatos
		verLDatos = buildVerLDatos();
		mainLayout.addComponent(verLDatos);
		
		// absLBotones
		absLBotones = buildAbsLBotones();
		mainLayout.addComponent(absLBotones);
		mainLayout.setComponentAlignment(absLBotones, new Alignment(24));
		
		return mainLayout;
	}
	@AutoGenerated
	private HorizontalLayout buildHorLRespProd() {
		// common part: create layout
		horLRespProd = new HorizontalLayout();
		horLRespProd.setImmediate(false);
		horLRespProd.setWidth("801px");
		horLRespProd.setHeight("-1px");
		horLRespProd.setMargin(false);
		
		// panResponsable
		panResponsable = buildPanResponsable();
		horLRespProd.addComponent(panResponsable);
		
		// panProductor
		panProductor = buildPanProductor();
		horLRespProd.addComponent(panProductor);
		horLRespProd.setComponentAlignment(panProductor, new Alignment(6));
		
		return horLRespProd;
	}
	@AutoGenerated
	private Panel buildPanResponsable() {
		// common part: create layout
		panResponsable = new Panel();
		panResponsable.setCaption("Responsable Técnico");
		panResponsable.setImmediate(false);
		panResponsable.setWidth("396px");
		panResponsable.setHeight("-1px");
		
		// absLResponsable
		absLResponsable = buildAbsLResponsable();
		panResponsable.setContent(absLResponsable);
		
		return panResponsable;
	}
	@AutoGenerated
	private AbsoluteLayout buildAbsLResponsable() {
		// common part: create layout
		absLResponsable = new AbsoluteLayout();
		absLResponsable.setImmediate(false);
		absLResponsable.setWidth("100.0%");
		absLResponsable.setHeight("45px");
		
		// cmbResponsable
		cmbResponsable = new ComboBox();
		cmbResponsable.setImmediate(true);
		cmbResponsable.setWidth("375px");
		cmbResponsable.setHeight("25px");
		cmbResponsable.setTabIndex(1);
		absLResponsable.addComponent(cmbResponsable, "top:10.0px;left:10.0px;");
		
		return absLResponsable;
	}
	@AutoGenerated
	private Panel buildPanProductor() {
		// common part: create layout
		panProductor = new Panel();
		panProductor.setCaption("Usuario");
		panProductor.setImmediate(false);
		panProductor.setWidth("396px");
		panProductor.setHeight("-1px");
		
		// absLProductor
		absLProductor = buildAbsLProductor();
		panProductor.setContent(absLProductor);
		
		return panProductor;
	}
	@AutoGenerated
	private AbsoluteLayout buildAbsLProductor() {
		// common part: create layout
		absLProductor = new AbsoluteLayout();
		absLProductor.setImmediate(false);
		absLProductor.setWidth("100.0%");
		absLProductor.setHeight("45px");
		
		// cmbProductor
		cmbProductor = new ComboBox();
		cmbProductor.setImmediate(false);
		cmbProductor.setWidth("375px");
		cmbProductor.setHeight("25px");
		absLProductor.addComponent(cmbProductor, "top:10.0px;left:10.0px;");
		
		return absLProductor;
	}
	@AutoGenerated
	private VerticalLayout buildVerLListado() {
		// common part: create layout
		verLListado = new VerticalLayout();
		verLListado.setImmediate(false);
		verLListado.setWidth("-1px");
		verLListado.setHeight("-1px");
		verLListado.setMargin(false);
		
		// tblListado
		tblListado = new Table();
		tblListado
				.setCaption("* Dar doble click sobre un elemento para modificarlo");
		tblListado.setImmediate(false);
		tblListado.setWidth("801px");
		tblListado.setHeight("300px");
		verLListado.addComponent(tblListado);
		
		// lblRowCount
		lblRowCount = new Label();
		lblRowCount.setImmediate(false);
		lblRowCount.setWidth("-1px");
		lblRowCount.setHeight("-1px");
		lblRowCount.setValue("0 registros encontrados");
		verLListado.addComponent(lblRowCount);
		
		return verLListado;
	}
	@AutoGenerated
	private VerticalLayout buildVerLDatos() {
		// common part: create layout
		verLDatos = new VerticalLayout();
		verLDatos.setImmediate(false);
		verLDatos.setWidth("-1px");
		verLDatos.setHeight("-1px");
		verLDatos.setMargin(false);
		verLDatos.setSpacing(true);
		
		// horLParcelaNivelacion
		horLParcelaNivelacion = buildHorLParcelaNivelacion();
		verLDatos.addComponent(horLParcelaNivelacion);
		
		// panCaracteristicas
		panCaracteristicas = buildPanCaracteristicas();
		verLDatos.addComponent(panCaracteristicas);
		
		// horLCultivo
		horLCultivo = buildHorLCultivo();
		verLDatos.addComponent(horLCultivo);
		
		return verLDatos;
	}
	@AutoGenerated
	private HorizontalLayout buildHorLParcelaNivelacion() {
		// common part: create layout
		horLParcelaNivelacion = new HorizontalLayout();
		horLParcelaNivelacion.setImmediate(false);
		horLParcelaNivelacion.setWidth("801px");
		horLParcelaNivelacion.setHeight("-1px");
		horLParcelaNivelacion.setMargin(false);
		
		// panParcela
		panParcela = buildPanParcela();
		horLParcelaNivelacion.addComponent(panParcela);
		
		// panNivelacion
		panNivelacion = buildPanNivelacion();
		horLParcelaNivelacion.addComponent(panNivelacion);
		horLParcelaNivelacion.setComponentAlignment(panNivelacion,
				new Alignment(6));
		
		return horLParcelaNivelacion;
	}
	@AutoGenerated
	private Panel buildPanParcela() {
		// common part: create layout
		panParcela = new Panel();
		panParcela.setCaption("Parcela (Núm. de Cta. / Subcta. de Padrón)");
		panParcela.setImmediate(false);
		panParcela.setWidth("421px");
		panParcela.setHeight("-1px");
		
		// absLParcela
		absLParcela = buildAbsLParcela();
		panParcela.setContent(absLParcela);
		
		return panParcela;
	}
	@AutoGenerated
	private AbsoluteLayout buildAbsLParcela() {
		// common part: create layout
		absLParcela = new AbsoluteLayout();
		absLParcela.setImmediate(false);
		absLParcela.setWidth("100.0%");
		absLParcela.setHeight("45px");
		
		// cmbParcela
		cmbParcela = new ComboBox();
		cmbParcela.setImmediate(false);
		cmbParcela.setWidth("400px");
		cmbParcela.setHeight("25px");
		cmbParcela.setTabIndex(2);
		absLParcela.addComponent(cmbParcela, "top:10.0px;left:10.0px;");
		
		return absLParcela;
	}
	@AutoGenerated
	private Panel buildPanNivelacion() {
		// common part: create layout
		panNivelacion = new Panel();
		panNivelacion.setCaption("Nivelación");
		panNivelacion.setImmediate(false);
		panNivelacion.setWidth("301px");
		panNivelacion.setHeight("-1px");
		
		// verLNivelacion
		verLNivelacion = buildVerLNivelacion();
		panNivelacion.setContent(verLNivelacion);
		
		return panNivelacion;
	}
	@AutoGenerated
	private VerticalLayout buildVerLNivelacion() {
		// common part: create layout
		verLNivelacion = new VerticalLayout();
		verLNivelacion.setImmediate(false);
		verLNivelacion.setWidth("100.0%");
		verLNivelacion.setHeight("-1px");
		verLNivelacion.setMargin(false);
		
		// absLTrazo
		absLTrazo = buildAbsLTrazo();
		verLNivelacion.addComponent(absLTrazo);
		
		// absLNivelacion
		absLNivelacion = buildAbsLNivelacion();
		verLNivelacion.addComponent(absLNivelacion);
		
		// absLNivelacionNo
		absLNivelacionNo = buildAbsLNivelacionNo();
		verLNivelacion.addComponent(absLNivelacionNo);
		
		return verLNivelacion;
	}
	@AutoGenerated
	private AbsoluteLayout buildAbsLTrazo() {
		// common part: create layout
		absLTrazo = new AbsoluteLayout();
		absLTrazo.setImmediate(false);
		absLTrazo.setWidth("100.0%");
		absLTrazo.setHeight("30px");
		
		// chkTrazo
		chkTrazo = new CheckBox();
		chkTrazo.setCaption("Tiene trazo de riego");
		chkTrazo.setImmediate(false);
		chkTrazo.setWidth("-1px");
		chkTrazo.setHeight("-1px");
		chkTrazo.setTabIndex(7);
		absLTrazo.addComponent(chkTrazo, "top:10.0px;left:10.0px;");
		
		return absLTrazo;
	}
	@AutoGenerated
	private AbsoluteLayout buildAbsLNivelacion() {
		// common part: create layout
		absLNivelacion = new AbsoluteLayout();
		absLNivelacion.setImmediate(false);
		absLNivelacion.setWidth("100.0%");
		absLNivelacion.setHeight("40px");
		
		// chkNivelada
		chkNivelada = new CheckBox();
		chkNivelada.setCaption("Ha sido nivelada");
		chkNivelada.setImmediate(false);
		chkNivelada.setWidth("-1px");
		chkNivelada.setHeight("-1px");
		chkNivelada.setTabIndex(3);
		absLNivelacion.addComponent(chkNivelada, "top:13.0px;left:10.0px;");
		
		// datNivelacion
		datNivelacion = new DateField();
		datNivelacion.setImmediate(false);
		datNivelacion.setWidth("135px");
		datNivelacion.setHeight("25px");
		datNivelacion.setTabIndex(4);
		absLNivelacion.addComponent(datNivelacion, "top:10.0px;left:155.0px;");
		
		return absLNivelacion;
	}
	@AutoGenerated
	private AbsoluteLayout buildAbsLNivelacionNo() {
		// common part: create layout
		absLNivelacionNo = new AbsoluteLayout();
		absLNivelacionNo.setImmediate(false);
		absLNivelacionNo.setWidth("100.0%");
		absLNivelacionNo.setHeight("30px");
		
		// chkRequiere
		chkRequiere = new CheckBox();
		chkRequiere.setCaption("Requiere nivelación");
		chkRequiere.setImmediate(false);
		chkRequiere.setWidth("-1px");
		chkRequiere.setHeight("-1px");
		chkRequiere.setTabIndex(5);
		absLNivelacionNo.addComponent(chkRequiere, "top:5.0px;left:10.0px;");
		
		// chkProyecto
		chkProyecto = new CheckBox();
		chkProyecto.setCaption("Tiene proyecto");
		chkProyecto.setImmediate(false);
		chkProyecto.setWidth("-1px");
		chkProyecto.setHeight("-1px");
		chkProyecto.setTabIndex(6);
		absLNivelacionNo.addComponent(chkProyecto, "top:5.0px;left:155.0px;");
		
		return absLNivelacionNo;
	}
	@AutoGenerated
	private Panel buildPanCaracteristicas() {
		// common part: create layout
		panCaracteristicas = new Panel();
		panCaracteristicas.setCaption("Caracteristicas de la Parcela");
		panCaracteristicas.setImmediate(false);
		panCaracteristicas.setWidth("801px");
		panCaracteristicas.setHeight("-1px");
		
		// verLCaracteristicas
		verLCaracteristicas = buildVerLCaracteristicas();
		panCaracteristicas.setContent(verLCaracteristicas);
		
		return panCaracteristicas;
	}
	@AutoGenerated
	private VerticalLayout buildVerLCaracteristicas() {
		// common part: create layout
		verLCaracteristicas = new VerticalLayout();
		verLCaracteristicas.setImmediate(false);
		verLCaracteristicas.setWidth("100.0%");
		verLCaracteristicas.setHeight("-1px");
		verLCaracteristicas.setMargin(false);
		
		// absLCaracteristicas1
		absLCaracteristicas1 = buildAbsLCaracteristicas1();
		verLCaracteristicas.addComponent(absLCaracteristicas1);
		
		// absLCaracteristicas2
		absLCaracteristicas2 = buildAbsLCaracteristicas2();
		verLCaracteristicas.addComponent(absLCaracteristicas2);
		
		// absLCaracteristicas3
		absLCaracteristicas3 = buildAbsLCaracteristicas3();
		verLCaracteristicas.addComponent(absLCaracteristicas3);
		
		// absLCaracteristicas4
		absLCaracteristicas4 = buildAbsLCaracteristicas4();
		verLCaracteristicas.addComponent(absLCaracteristicas4);
		
		// absLCaracteristicas5
		absLCaracteristicas5 = buildAbsLCaracteristicas5();
		verLCaracteristicas.addComponent(absLCaracteristicas5);
		
		// absLCaracteristicas6
		absLCaracteristicas6 = buildAbsLCaracteristicas6();
		verLCaracteristicas.addComponent(absLCaracteristicas6);
		
		return verLCaracteristicas;
	}
	@AutoGenerated
	private AbsoluteLayout buildAbsLCaracteristicas1() {
		// common part: create layout
		absLCaracteristicas1 = new AbsoluteLayout();
		absLCaracteristicas1.setImmediate(false);
		absLCaracteristicas1.setWidth("100.0%");
		absLCaracteristicas1.setHeight("55px");
		
		// cmbTipoSuelo
		cmbTipoSuelo = new ComboBox();
		cmbTipoSuelo.setCaption("Tipo de Suelo");
		cmbTipoSuelo.setImmediate(false);
		cmbTipoSuelo.setWidth("465px");
		cmbTipoSuelo.setHeight("25px");
		cmbTipoSuelo.setTabIndex(8);
		absLCaracteristicas1.addComponent(cmbTipoSuelo,
				"top:28.0px;left:10.0px;");
		
		// txtRugosidad
		txtRugosidad = new TextField();
		txtRugosidad.setCaption("Rugosidad del Suelo");
		txtRugosidad.setImmediate(true);
		txtRugosidad.setWidth("210px");
		txtRugosidad.setHeight("25px");
		txtRugosidad.setTabIndex(19);
		absLCaracteristicas1.addComponent(txtRugosidad,
				"top:28.0px;left:545.0px;");
		
		// lblRugosidad
		lblRugosidad = new Label();
		lblRugosidad.setImmediate(false);
		lblRugosidad.setWidth("26px");
		lblRugosidad.setHeight("-1px");
		lblRugosidad.setValue("adim");
		absLCaracteristicas1.addComponent(lblRugosidad,
				"top:32.0px;left:760.0px;");
		
		return absLCaracteristicas1;
	}
	@AutoGenerated
	private AbsoluteLayout buildAbsLCaracteristicas2() {
		// common part: create layout
		absLCaracteristicas2 = new AbsoluteLayout();
		absLCaracteristicas2.setImmediate(false);
		absLCaracteristicas2.setWidth("100.0%");
		absLCaracteristicas2.setHeight("45px");
		
		// txtLongitud
		txtLongitud = new TextField();
		txtLongitud.setCaption("Longitud");
		txtLongitud.setImmediate(true);
		txtLongitud.setWidth("215px");
		txtLongitud.setHeight("25px");
		txtLongitud.setTabIndex(9);
		absLCaracteristicas2.addComponent(txtLongitud,
				"top:18.0px;left:10.0px;");
		
		// lblLongitud
		lblLongitud = new Label();
		lblLongitud.setImmediate(false);
		lblLongitud.setWidth("-1px");
		lblLongitud.setHeight("-1px");
		lblLongitud.setValue("m");
		absLCaracteristicas2.addComponent(lblLongitud,
				"top:22.0px;left:230.0px;");
		
		// txtHumSat
		txtHumSat = new TextField();
		txtHumSat.setCaption("Cont. de Hum. a Saturación");
		txtHumSat.setImmediate(true);
		txtHumSat.setWidth("210px");
		txtHumSat.setHeight("25px");
		txtHumSat.setTabIndex(14);
		absLCaracteristicas2
				.addComponent(txtHumSat, "top:18.0px;left:265.0px;");
		
		// lblHumSat
		lblHumSat = new Label();
		lblHumSat.setImmediate(false);
		lblHumSat.setWidth("-1px");
		lblHumSat.setHeight("-1px");
		lblHumSat.setValue("cm³/cm³");
		absLCaracteristicas2
				.addComponent(lblHumSat, "top:22.0px;left:480.0px;");
		
		// txtDensidad
		txtDensidad = new TextField();
		txtDensidad.setCaption("Densidad Aparente");
		txtDensidad.setImmediate(true);
		txtDensidad.setWidth("210px");
		txtDensidad.setHeight("25px");
		txtDensidad.setTabIndex(20);
		absLCaracteristicas2.addComponent(txtDensidad,
				"top:18.0px;left:545.0px;");
		
		// lblDensidad
		lblDensidad = new Label();
		lblDensidad.setImmediate(false);
		lblDensidad.setWidth("-1px");
		lblDensidad.setHeight("-1px");
		lblDensidad.setValue("m");
		absLCaracteristicas2.addComponent(lblDensidad,
				"top:22.0px;left:760.0px;");
		
		return absLCaracteristicas2;
	}
	@AutoGenerated
	private AbsoluteLayout buildAbsLCaracteristicas3() {
		// common part: create layout
		absLCaracteristicas3 = new AbsoluteLayout();
		absLCaracteristicas3.setImmediate(false);
		absLCaracteristicas3.setWidth("100.0%");
		absLCaracteristicas3.setHeight("45px");
		
		// txtAncho
		txtAncho = new TextField();
		txtAncho.setCaption("Ancho");
		txtAncho.setImmediate(true);
		txtAncho.setWidth("215px");
		txtAncho.setHeight("25px");
		txtAncho.setTabIndex(10);
		absLCaracteristicas3.addComponent(txtAncho, "top:18.0px;left:10.0px;");
		
		// lblAncho
		lblAncho = new Label();
		lblAncho.setImmediate(false);
		lblAncho.setWidth("-1px");
		lblAncho.setHeight("-1px");
		lblAncho.setValue("m");
		absLCaracteristicas3.addComponent(lblAncho, "top:22.0px;left:230.0px;");
		
		// txtHumCC
		txtHumCC = new TextField();
		txtHumCC.setCaption("Cont. de Hum. CC");
		txtHumCC.setImmediate(true);
		txtHumCC.setWidth("210px");
		txtHumCC.setHeight("25px");
		txtHumCC.setTabIndex(15);
		absLCaracteristicas3.addComponent(txtHumCC, "top:18.0px;left:265.0px;");
		
		// lblHumCC
		lblHumCC = new Label();
		lblHumCC.setImmediate(false);
		lblHumCC.setWidth("-1px");
		lblHumCC.setHeight("-1px");
		lblHumCC.setValue("cm³/cm³");
		absLCaracteristicas3.addComponent(lblHumCC, "top:22.0px;left:480.0px;");
		
		// txtArena
		txtArena = new TextField();
		txtArena.setCaption("Arena");
		txtArena.setImmediate(true);
		txtArena.setWidth("210px");
		txtArena.setHeight("25px");
		txtArena.setTabIndex(21);
		absLCaracteristicas3.addComponent(txtArena, "top:18.0px;left:545.0px;");
		
		// lblArena
		lblArena = new Label();
		lblArena.setImmediate(false);
		lblArena.setWidth("-1px");
		lblArena.setHeight("-1px");
		lblArena.setValue("%");
		absLCaracteristicas3.addComponent(lblArena, "top:22.0px;left:760.0px;");
		
		return absLCaracteristicas3;
	}
	@AutoGenerated
	private AbsoluteLayout buildAbsLCaracteristicas4() {
		// common part: create layout
		absLCaracteristicas4 = new AbsoluteLayout();
		absLCaracteristicas4.setImmediate(false);
		absLCaracteristicas4.setWidth("100.0%");
		absLCaracteristicas4.setHeight("45px");
		
		// txtSupRegada
		txtSupRegada = new TextField();
		txtSupRegada.setCaption("Superficie Regada");
		txtSupRegada.setImmediate(true);
		txtSupRegada.setWidth("215px");
		txtSupRegada.setHeight("25px");
		txtSupRegada.setTabIndex(11);
		absLCaracteristicas4.addComponent(txtSupRegada,
				"top:18.0px;left:10.0px;");
		
		// lblSupRegada
		lblSupRegada = new Label();
		lblSupRegada.setImmediate(false);
		lblSupRegada.setWidth("-1px");
		lblSupRegada.setHeight("-1px");
		lblSupRegada.setValue("ha");
		absLCaracteristicas4.addComponent(lblSupRegada,
				"top:22.0px;left:230.0px;");
		
		// txtHumPMP
		txtHumPMP = new TextField();
		txtHumPMP.setCaption("Cont. de Hum. a PMP");
		txtHumPMP.setImmediate(true);
		txtHumPMP.setWidth("210px");
		txtHumPMP.setHeight("25px");
		txtHumPMP.setTabIndex(16);
		absLCaracteristicas4
				.addComponent(txtHumPMP, "top:18.0px;left:265.0px;");
		
		// lblHumPMP
		lblHumPMP = new Label();
		lblHumPMP.setImmediate(false);
		lblHumPMP.setWidth("-1px");
		lblHumPMP.setHeight("-1px");
		lblHumPMP.setValue("cm³/cm³");
		absLCaracteristicas4
				.addComponent(lblHumPMP, "top:22.0px;left:480.0px;");
		
		// txtArcilla
		txtArcilla = new TextField();
		txtArcilla.setCaption("Arcilla");
		txtArcilla.setImmediate(true);
		txtArcilla.setWidth("210px");
		txtArcilla.setHeight("25px");
		txtArcilla.setTabIndex(22);
		absLCaracteristicas4.addComponent(txtArcilla,
				"top:18.0px;left:545.0px;");
		
		// lblArcilla
		lblArcilla = new Label();
		lblArcilla.setImmediate(false);
		lblArcilla.setWidth("-1px");
		lblArcilla.setHeight("-1px");
		lblArcilla.setValue("%");
		absLCaracteristicas4.addComponent(lblArcilla,
				"top:22.0px;left:760.0px;");
		
		return absLCaracteristicas4;
	}
	@AutoGenerated
	private AbsoluteLayout buildAbsLCaracteristicas5() {
		// common part: create layout
		absLCaracteristicas5 = new AbsoluteLayout();
		absLCaracteristicas5.setImmediate(false);
		absLCaracteristicas5.setWidth("100.0%");
		absLCaracteristicas5.setHeight("45px");
		
		// txtAnchoSurco
		txtAnchoSurco = new TextField();
		txtAnchoSurco.setCaption("Ancho del Surco");
		txtAnchoSurco.setImmediate(true);
		txtAnchoSurco.setWidth("215px");
		txtAnchoSurco.setHeight("25px");
		txtAnchoSurco.setTabIndex(12);
		absLCaracteristicas5.addComponent(txtAnchoSurco,
				"top:18.0px;left:10.0px;");
		
		// lblAnchoSurco
		lblAnchoSurco = new Label();
		lblAnchoSurco.setImmediate(false);
		lblAnchoSurco.setWidth("-1px");
		lblAnchoSurco.setHeight("-1px");
		lblAnchoSurco.setValue("m");
		absLCaracteristicas5.addComponent(lblAnchoSurco,
				"top:22.0px;left:230.0px;");
		
		// txtCondHidSat
		txtCondHidSat = new TextField();
		txtCondHidSat.setCaption("Cond. Hidráulica a Saturación");
		txtCondHidSat.setImmediate(true);
		txtCondHidSat.setWidth("210px");
		txtCondHidSat.setHeight("25px");
		txtCondHidSat.setTabIndex(17);
		absLCaracteristicas5.addComponent(txtCondHidSat,
				"top:18.0px;left:265.0px;");
		
		// lblCondHidSat
		lblCondHidSat = new Label();
		lblCondHidSat.setImmediate(false);
		lblCondHidSat.setWidth("-1px");
		lblCondHidSat.setHeight("-1px");
		lblCondHidSat.setValue("cm/h");
		absLCaracteristicas5.addComponent(lblCondHidSat,
				"top:22.0px;left:480.0px;");
		
		// txtLimo
		txtLimo = new TextField();
		txtLimo.setCaption("Limo");
		txtLimo.setImmediate(true);
		txtLimo.setWidth("210px");
		txtLimo.setHeight("25px");
		txtLimo.setTabIndex(23);
		absLCaracteristicas5.addComponent(txtLimo, "top:18.0px;left:545.0px;");
		
		// lblLimo
		lblLimo = new Label();
		lblLimo.setImmediate(false);
		lblLimo.setWidth("-1px");
		lblLimo.setHeight("-1px");
		lblLimo.setValue("%");
		absLCaracteristicas5.addComponent(lblLimo, "top:22.0px;left:760.0px;");
		
		return absLCaracteristicas5;
	}
	@AutoGenerated
	private AbsoluteLayout buildAbsLCaracteristicas6() {
		// common part: create layout
		absLCaracteristicas6 = new AbsoluteLayout();
		absLCaracteristicas6.setImmediate(false);
		absLCaracteristicas6.setWidth("100.0%");
		absLCaracteristicas6.setHeight("55px");
		
		// txtAnchoTendido
		txtAnchoTendido = new TextField();
		txtAnchoTendido.setCaption("Ancho del Tendido");
		txtAnchoTendido.setImmediate(true);
		txtAnchoTendido.setWidth("215px");
		txtAnchoTendido.setHeight("25px");
		txtAnchoTendido.setTabIndex(13);
		absLCaracteristicas6.addComponent(txtAnchoTendido,
				"top:18.0px;left:10.0px;");
		
		// lblAnchoTendido
		lblAnchoTendido = new Label();
		lblAnchoTendido.setImmediate(false);
		lblAnchoTendido.setWidth("-1px");
		lblAnchoTendido.setHeight("-1px");
		lblAnchoTendido.setValue("m");
		absLCaracteristicas6.addComponent(lblAnchoTendido,
				"top:22.0px;left:230.0px;");
		
		// txtParamHF
		txtParamHF = new TextField();
		txtParamHF.setCaption("Parámetro HF");
		txtParamHF.setImmediate(true);
		txtParamHF.setWidth("210px");
		txtParamHF.setHeight("25px");
		txtParamHF.setTabIndex(18);
		absLCaracteristicas6.addComponent(txtParamHF,
				"top:18.0px;left:265.0px;");
		
		// lblParamHF
		lblParamHF = new Label();
		lblParamHF.setImmediate(false);
		lblParamHF.setWidth("-1px");
		lblParamHF.setHeight("-1px");
		lblParamHF.setValue("cm");
		absLCaracteristicas6.addComponent(lblParamHF,
				"top:22.0px;left:480.0px;");
		
		// txtPendiente
		txtPendiente = new TextField();
		txtPendiente.setCaption("Pendiente");
		txtPendiente.setImmediate(true);
		txtPendiente.setWidth("210px");
		txtPendiente.setHeight("25px");
		txtPendiente.setTabIndex(24);
		absLCaracteristicas6.addComponent(txtPendiente,
				"top:18.0px;left:545.0px;");
		
		// lblPendiente
		lblPendiente = new Label();
		lblPendiente.setImmediate(false);
		lblPendiente.setWidth("-1px");
		lblPendiente.setHeight("-1px");
		lblPendiente.setValue("%");
		absLCaracteristicas6.addComponent(lblPendiente,
				"top:22.0px;left:760.0px;");
		
		return absLCaracteristicas6;
	}
	@AutoGenerated
	private HorizontalLayout buildHorLCultivo() {
		// common part: create layout
		horLCultivo = new HorizontalLayout();
		horLCultivo.setImmediate(false);
		horLCultivo.setWidth("801px");
		horLCultivo.setHeight("-1px");
		horLCultivo.setMargin(false);
		
		// panCultivoAnt
		panCultivoAnt = buildPanCultivoAnt();
		horLCultivo.addComponent(panCultivoAnt);
		
		// panCultivoAct
		panCultivoAct = buildPanCultivoAct();
		horLCultivo.addComponent(panCultivoAct);
		horLCultivo.setComponentAlignment(panCultivoAct, new Alignment(6));
		
		return horLCultivo;
	}
	@AutoGenerated
	private Panel buildPanCultivoAnt() {
		// common part: create layout
		panCultivoAnt = new Panel();
		panCultivoAnt.setCaption("Cultivo Anterior");
		panCultivoAnt.setImmediate(false);
		panCultivoAnt.setWidth("391px");
		panCultivoAnt.setHeight("-1px");
		
		// absLCultivoAnt
		absLCultivoAnt = buildAbsLCultivoAnt();
		panCultivoAnt.setContent(absLCultivoAnt);
		
		return panCultivoAnt;
	}
	@AutoGenerated
	private AbsoluteLayout buildAbsLCultivoAnt() {
		// common part: create layout
		absLCultivoAnt = new AbsoluteLayout();
		absLCultivoAnt.setImmediate(false);
		absLCultivoAnt.setWidth("100.0%");
		absLCultivoAnt.setHeight("200px");
		
		// cmbCicloAnt
		cmbCicloAnt = new ComboBox();
		cmbCicloAnt.setCaption("Ciclo");
		cmbCicloAnt.setImmediate(false);
		cmbCicloAnt.setWidth("370px");
		cmbCicloAnt.setHeight("25px");
		cmbCicloAnt.setTabIndex(25);
		absLCultivoAnt.addComponent(cmbCicloAnt, "top:28.0px;left:10.0px;");
		
		// txtCultivoAnt
		txtCultivoAnt = new TextField();
		txtCultivoAnt.setCaption("Cultivo");
		txtCultivoAnt.setImmediate(false);
		txtCultivoAnt.setWidth("370px");
		txtCultivoAnt.setHeight("25px");
		txtCultivoAnt.setTabIndex(26);
		absLCultivoAnt.addComponent(txtCultivoAnt, "top:73.0px;left:10.0px;");
		
		// txtRendimientoAnt
		txtRendimientoAnt = new TextField();
		txtRendimientoAnt.setCaption("Rendimiento");
		txtRendimientoAnt.setImmediate(true);
		txtRendimientoAnt.setWidth("175px");
		txtRendimientoAnt.setHeight("25px");
		txtRendimientoAnt.setTabIndex(27);
		absLCultivoAnt.addComponent(txtRendimientoAnt,
				"top:118.0px;left:10.0px;");
		
		// lblRendimientoAnt
		lblRendimientoAnt = new Label();
		lblRendimientoAnt.setImmediate(false);
		lblRendimientoAnt.setWidth("-1px");
		lblRendimientoAnt.setHeight("-1px");
		lblRendimientoAnt.setValue("ton/ha");
		absLCultivoAnt.addComponent(lblRendimientoAnt,
				"top:122.0px;left:190.0px;");
		
		// datSiembraAnt
		datSiembraAnt = new DateField();
		datSiembraAnt.setCaption("Fecha de Siembra");
		datSiembraAnt.setImmediate(false);
		datSiembraAnt.setWidth("175px");
		datSiembraAnt.setHeight("25px");
		datSiembraAnt.setTabIndex(28);
		absLCultivoAnt.addComponent(datSiembraAnt, "top:163.0px;left:10.0px;");
		
		// datCosechaAnt
		datCosechaAnt = new DateField();
		datCosechaAnt.setCaption("Fecha de Cosecha");
		datCosechaAnt.setImmediate(false);
		datCosechaAnt.setWidth("175px");
		datCosechaAnt.setHeight("25px");
		datCosechaAnt.setTabIndex(29);
		absLCultivoAnt.addComponent(datCosechaAnt, "top:163.0px;left:205.0px;");
		
		return absLCultivoAnt;
	}
	@AutoGenerated
	private Panel buildPanCultivoAct() {
		// common part: create layout
		panCultivoAct = new Panel();
		panCultivoAct.setCaption("Cultivo Actual");
		panCultivoAct.setImmediate(false);
		panCultivoAct.setWidth("391px");
		panCultivoAct.setHeight("-1px");
		
		// absLCultivoAct
		absLCultivoAct = buildAbsLCultivoAct();
		panCultivoAct.setContent(absLCultivoAct);
		
		return panCultivoAct;
	}
	@AutoGenerated
	private AbsoluteLayout buildAbsLCultivoAct() {
		// common part: create layout
		absLCultivoAct = new AbsoluteLayout();
		absLCultivoAct.setImmediate(false);
		absLCultivoAct.setWidth("100.0%");
		absLCultivoAct.setHeight("200px");
		
		// cmbCiclo
		cmbCiclo = new ComboBox();
		cmbCiclo.setCaption("Ciclo");
		cmbCiclo.setImmediate(false);
		cmbCiclo.setWidth("370px");
		cmbCiclo.setHeight("25px");
		cmbCiclo.setTabIndex(30);
		absLCultivoAct.addComponent(cmbCiclo, "top:28.0px;left:10.0px;");
		
		// txtCultivo
		txtCultivo = new TextField();
		txtCultivo.setCaption("Cultivo");
		txtCultivo.setImmediate(false);
		txtCultivo.setWidth("370px");
		txtCultivo.setHeight("25px");
		txtCultivo.setTabIndex(32);
		absLCultivoAct.addComponent(txtCultivo, "top:73.0px;left:10.0px;");
		
		// chkTerminoCiclo
		chkTerminoCiclo = new CheckBox();
		chkTerminoCiclo.setCaption("Terminó el ciclo");
		chkTerminoCiclo.setImmediate(false);
		chkTerminoCiclo.setWidth("-1px");
		chkTerminoCiclo.setHeight("-1px");
		absLCultivoAct
				.addComponent(chkTerminoCiclo, "top:118.0px;left:10.0px;");
		
		// absLRendimiento
		absLRendimiento = buildAbsLRendimiento();
		absLCultivoAct.addComponent(absLRendimiento,
				"top:100.0px;left:135.0px;");
		
		// datSiembra
		datSiembra = new DateField();
		datSiembra.setCaption("Fecha de Siembra");
		datSiembra.setImmediate(false);
		datSiembra.setWidth("175px");
		datSiembra.setHeight("25px");
		datSiembra.setTabIndex(34);
		absLCultivoAct.addComponent(datSiembra, "top:163.0px;left:10.0px;");
		
		// datCosecha
		datCosecha = new DateField();
		datCosecha.setCaption("Fecha de Cosecha");
		datCosecha.setImmediate(false);
		datCosecha.setWidth("175px");
		datCosecha.setHeight("25px");
		datCosecha.setTabIndex(35);
		absLCultivoAct.addComponent(datCosecha, "top:163.0px;left:205.0px;");
		
		return absLCultivoAct;
	}
	@AutoGenerated
	private AbsoluteLayout buildAbsLRendimiento() {
		// common part: create layout
		absLRendimiento = new AbsoluteLayout();
		absLRendimiento.setImmediate(false);
		absLRendimiento.setWidth("245px");
		absLRendimiento.setHeight("45px");
		
		// txtRendimiento
		txtRendimiento = new TextField();
		txtRendimiento.setCaption("Rendimiento");
		txtRendimiento.setImmediate(true);
		txtRendimiento.setWidth("205px");
		txtRendimiento.setHeight("25px");
		txtRendimiento.setTabIndex(33);
		absLRendimiento.addComponent(txtRendimiento, "top:18.0px;left:0.0px;");
		
		// lblRendimiento
		lblRendimiento = new Label();
		lblRendimiento.setImmediate(false);
		lblRendimiento.setWidth("-1px");
		lblRendimiento.setHeight("-1px");
		lblRendimiento.setValue("ton/ha");
		absLRendimiento
				.addComponent(lblRendimiento, "top:22.0px;left:210.0px;");
		
		return absLRendimiento;
	}
	@AutoGenerated
	private AbsoluteLayout buildAbsLBotones() {
		// common part: create layout
		absLBotones = new AbsoluteLayout();
		absLBotones.setImmediate(false);
		absLBotones.setWidth("801px");
		absLBotones.setHeight("30px");
		
		// btnGuardar
		btnGuardar = new Button();
		btnGuardar.setCaption("Guardar");
		btnGuardar.setImmediate(true);
		btnGuardar.setWidth("-1px");
		btnGuardar.setHeight("-1px");
		absLBotones.addComponent(btnGuardar, "right:0.0px;bottom:0.0px;");
		
		// horLBotones
		horLBotones = buildHorLBotones();
		absLBotones.addComponent(horLBotones, "bottom:0.0px;left:0.0px;");
		
		return absLBotones;
	}
	@AutoGenerated
	private HorizontalLayout buildHorLBotones() {
		// common part: create layout
		horLBotones = new HorizontalLayout();
		horLBotones.setImmediate(false);
		horLBotones.setWidth("-1px");
		horLBotones.setHeight("-1px");
		horLBotones.setMargin(false);
		horLBotones.setSpacing(true);
		
		// btnNuevo
		btnNuevo = new Button();
		btnNuevo.setCaption("Agregar Nuevo");
		btnNuevo.setImmediate(true);
		btnNuevo.setWidth("-1px");
		btnNuevo.setHeight("-1px");
		horLBotones.addComponent(btnNuevo);
		
		// btnVolver
		btnVolver = new Button();
		btnVolver.setCaption("Volver");
		btnVolver.setImmediate(true);
		btnVolver.setWidth("-1px");
		btnVolver.setHeight("-1px");
		horLBotones.addComponent(btnVolver);
		
		return horLBotones;
	}
	
	//endregion
}