package com.saprigrat.ui.forms.nivelesDeAdministracion;

import java.sql.Date;
import java.util.LinkedList;

import org.joda.time.LocalDate;
import org.vaadin.addons.tuningdatefield.TuningDateField;
import org.vaadin.dialogs.ConfirmDialog;

import com.saprigrat.data.Datos;
import com.saprigrat.data.Utilerias;
import com.saprigrat.entities.Usuario;
import com.saprigrat.enums.TipoUsuario;
import com.saprigrat.ui.components.Foto;
import com.saprigrat.ui.interfaces.Formulario;
import com.vaadin.annotations.AutoGenerated;
import com.vaadin.data.Property.ValueChangeEvent;
import com.vaadin.data.Property.ValueChangeListener;
import com.vaadin.event.ItemClickEvent;
import com.vaadin.event.ItemClickEvent.ItemClickListener;
import com.vaadin.event.ShortcutAction.KeyCode;
import com.vaadin.event.ShortcutAction.ModifierKey;
import com.vaadin.shared.ui.combobox.FilteringMode;
import com.vaadin.ui.AbsoluteLayout;
import com.vaadin.ui.Alignment;
import com.vaadin.ui.Button;
import com.vaadin.ui.Button.ClickEvent;
import com.vaadin.ui.Button.ClickListener;
import com.vaadin.ui.CheckBox;
import com.vaadin.ui.ComboBox;
import com.vaadin.ui.CustomComponent;
import com.vaadin.ui.HorizontalLayout;
import com.vaadin.ui.Label;
import com.vaadin.ui.Notification;
import com.vaadin.ui.Panel;
import com.vaadin.ui.PasswordField;
import com.vaadin.ui.Table;
import com.vaadin.ui.TextField;
import com.vaadin.ui.VerticalLayout;

@SuppressWarnings("serial")
public class Tecnico extends CustomComponent implements Formulario
{
	/*- VaadinEditorProperties={"grid":"RegularGrid,20","showGrid":true,"snapToGrid":true,"snapToObject":true,"movingGuides":false,"snappingDistance":10} */
	//region controles autogenerados
	
	@AutoGenerated
	private VerticalLayout mainLayout;
	@AutoGenerated
	private AbsoluteLayout absLBotones;
	@AutoGenerated
	private HorizontalLayout horLBotones;
	@AutoGenerated
	private Button btnVolver;
	@AutoGenerated
	private Button btnNuevo;
	@AutoGenerated
	private Button btnGuardar;
	@AutoGenerated
	private VerticalLayout verLDatos;
	@AutoGenerated
	private AbsoluteLayout absLCredencialesUser;
	@AutoGenerated
	private Panel panUser;
	@AutoGenerated
	private AbsoluteLayout absLUser;
	@AutoGenerated
	private PasswordField txtPass2;
	@AutoGenerated
	private PasswordField txtPass;
	@AutoGenerated
	private TextField txtUser;
	@AutoGenerated
	private Panel panCredenciales;
	@AutoGenerated
	private VerticalLayout verLCredenciales;
	@AutoGenerated
	private AbsoluteLayout absLCredenciales3;
	@AutoGenerated
	private AbsoluteLayout absLCredenciales2;
	@AutoGenerated
	private TextField txtAcreditacion;
	@AutoGenerated
	private ComboBox cmbInstitucionAcredita;
	@AutoGenerated
	private AbsoluteLayout absLCredenciales1;
	@AutoGenerated
	private CheckBox chkD;
	@AutoGenerated
	private CheckBox chkM;
	@AutoGenerated
	private ComboBox cmbLicenciatura;
	@AutoGenerated
	private Panel panContacto;
	@AutoGenerated
	private AbsoluteLayout absLContacto;
	@AutoGenerated
	private TextField txtEmail;
	@AutoGenerated
	private TextField txtCel;
	@AutoGenerated
	private TextField txtTel;
	@AutoGenerated
	private Panel panDireccion;
	@AutoGenerated
	private VerticalLayout verLDireccion;
	@AutoGenerated
	private AbsoluteLayout absLDireccion3;
	@AutoGenerated
	private TextField txtCP;
	@AutoGenerated
	private TextField txtNoInt;
	@AutoGenerated
	private TextField txtNoExt;
	@AutoGenerated
	private TextField txtCalle;
	@AutoGenerated
	private AbsoluteLayout absLDireccion2;
	@AutoGenerated
	private TextField txtCol;
	@AutoGenerated
	private TextField txtLoc;
	@AutoGenerated
	private AbsoluteLayout absLDireccion1;
	@AutoGenerated
	private ComboBox cmbMpio;
	@AutoGenerated
	private ComboBox cmbEdo;
	@AutoGenerated
	private AbsoluteLayout absLGeneralesFoto;
	@AutoGenerated
	private Foto panFoto;
	@AutoGenerated
	private Panel panGenerales;
	@AutoGenerated
	private VerticalLayout verLGenerales;
	@AutoGenerated
	private AbsoluteLayout absLGenerales3;
	@AutoGenerated
	private TuningDateField datIngreso;
	@AutoGenerated
	private AbsoluteLayout absLGenerales2;
	@AutoGenerated
	private TuningDateField datNacimiento;
	@AutoGenerated
	private AbsoluteLayout absLGenerales1;
	@AutoGenerated
	private TextField txtApM;
	@AutoGenerated
	private TextField txtApP;
	@AutoGenerated
	private TextField txtNombre;
	@AutoGenerated
	private VerticalLayout verLListado;
	@AutoGenerated
	private Label lblRowCount;
	@AutoGenerated
	private Table tblListado;
	@AutoGenerated
	private AbsoluteLayout absLRespCURR;
	@AutoGenerated
	private Panel panCURR;
	@AutoGenerated
	private AbsoluteLayout absLCURR;
	@AutoGenerated
	private TextField txtCURR;
	@AutoGenerated
	private Panel panResponsable;
	@AutoGenerated
	private AbsoluteLayout absLResponsable;
	@AutoGenerated
	private ComboBox cmbResponsable;
	//endregion
	private int tipoPersona;
	private TipoUsuario tipoUsuarioAgregar;
	private String[] responsableDirecto;
	private Utilerias u;
	private Usuario usuario;
	private Datos datos;
	private LinkedList<String> estados;
	private int idTecnico;

	//region eventos
	private ClickListener guardarListener = new ClickListener()
			{
				@Override
				public void buttonClick(ClickEvent event)
				{
					if(validar())
					{
						LinkedList<Object> valores = llenarListaDeParametros();
						if(btnGuardar.getCaption().equals("Guardar"))
						{
							LocalDate fecha = datIngreso.getLocalDate();
							String curr =   u.setDecimalFormat("00", tipoPersona) +
											u.setDecimalFormat("00", fecha.getYearOfCentury()) +
											u.setDecimalFormat("00", fecha.getMonthOfYear()) +
											u.setDecimalFormat("00", fecha.getDayOfMonth()) +
											u.setDecimalFormat("00", estados.indexOf(cmbEdo.getValue()) + 1);
							valores.add(0, curr);
							valores.add(7, u.fechaUtilToSQL(datIngreso.getLocalDate().toDate()));
							
							curr = datos.registrarTecnico(valores);
							if(!curr.isEmpty() && curr.indexOf("err") == -1)
							{
								String[]currArr = curr.split(" ");
								u.msjGuardado("El " + tipoUsuarioAgregar, "\nCURR asignado: " + currArr[0]);
								txtCURR.setValue(currArr[0]);
								//Se cambia a modo de modificación
								setTipo(MODO_MODIFICAR);
								idTecnico = Integer.parseInt(currArr[1]);
							}
							else
								if(curr.indexOf("Log") == -1)
									u.msjNoGuardado(tipoUsuarioAgregar.toString());
								else
									if(curr.indexOf("Rep") != -1)
										u.msjNoGuardadoRepetido("nombre de usuario");
									else
										u.msjGuardadoSinLogin(tipoUsuarioAgregar.toString());
						}
						else
						{
							valores.add(0, idTecnico);
							valores.add(1, txtCURR.getValue());
							
							String status = datos.modificarTecnico(valores);
							if(!status.isEmpty() && status.indexOf("err") == -1)
								u.msjModificado("El " + tipoUsuarioAgregar);
							else
								if(status.indexOf("Log") != -1)
									u.msjNoModificadoRepetido("nombre de usuario");
								else
									u.msjNoModificado(tipoUsuarioAgregar.toString());
						}
					}
				}
			};
	private ItemClickListener llenarFormListener = new ItemClickListener()
			{
				@Override
				public void itemClick(ItemClickEvent event)
				{
					if(event.isDoubleClick())
					{
						idTecnico = Integer.parseInt(tblListado.getItemCaption(event.getItem()).split(" ")[0]);
						LinkedList<Object> valores = datos.getTecnico(idTecnico);
						if(!valores.isEmpty())
						{
							setTipo(MODO_MODIFICAR);
							
							txtCURR.setValue((String)valores.remove());
							cmbResponsable.select(valores.remove());
							txtNombre.setValue((String)valores.remove());
							txtApP.setValue((String)valores.remove());
							txtApM.setValue((String)valores.remove());
							datNacimiento.setLocalDate(u.fechaSQLToLocalDate((Date)valores.remove()));
							datIngreso.setLocalDate(u.fechaSQLToLocalDate((Date)valores.remove()));
							cmbEdo.select(valores.remove());
							cmbMpio.select(valores.remove());
							txtLoc.setValue((String)valores.remove());
							txtCol.setValue((String)valores.remove());
							txtCalle.setValue((String)valores.remove());
							txtNoExt.setValue((String)valores.remove());
							txtNoInt.setValue((String)valores.remove());
							txtCP.setValue((String)valores.remove());
							txtTel.setValue((String)valores.remove());
							txtCel.setValue((String)valores.remove());
							txtEmail.setValue((String)valores.remove());
							cmbLicenciatura.select(valores.remove());
							chkM.setValue((Boolean)valores.remove());
							chkD.setValue((Boolean)valores.remove());
							cmbInstitucionAcredita.select(valores.remove());
							txtAcreditacion.setValue((String)valores.remove());
							valores.remove();//TODO
							panFoto.setFoto((String)valores.remove());
							txtUser.setValue((String)valores.remove());
							txtPass.setValue((String)valores.remove());
							txtPass2.setValue(txtPass.getValue());
						}
						else
							u.msjRegistroNoObtenido();
					}
				}
			};
	private ValueChangeListener llenarTablaListener = new ValueChangeListener()
			{
				@Override
				public void valueChange(ValueChangeEvent event)
				{
					if(verLListado.isVisible())
						lblRowCount.setValue(u.llenarTabla(tblListado, datos.getTecnicos(((String)cmbResponsable.getValue()).split(" ")[0], tipoPersona), tipoUsuarioAgregar.toString()));
				}
			};
	private ClickListener nuevoListener = new ClickListener()
			{
				@Override
				public void buttonClick(ClickEvent event)
				{
					if(!verLListado.isVisible())
						showDialog(MODO_AGREGAR);
					else
						resetForm(MODO_AGREGAR);
				}
			};
	private ClickListener volverEliminarListener = new ClickListener()
			{
				@Override
				public void buttonClick(ClickEvent event)
				{
					if(btnVolver.getCaption().equals("Volver"))
						showDialog(MODO_LISTA);
					else
					{
						if(tblListado.getValue() != null)
						{
							ConfirmDialog.show( event.getButton().getUI(),
												"Atención:",
												"Está a punto de eliminar un " + tipoUsuarioAgregar +
												" y esta acción no se puede deshacer. ¿Desea continuar?", "Si", "No",
												new ConfirmDialog.Listener()
												{
													public void onClose(ConfirmDialog dialog)
													{
														if (dialog.isConfirmed())
														{
															int rowSel = (Integer)tblListado.getValue();
															String curr = (String)tblListado.getContainerProperty(rowSel, "CURR").getValue();
															rowSel = (Integer)tblListado.getContainerProperty(rowSel, "ID").getValue();
															String status = datos.eliminarTecnico(rowSel, curr, tipoUsuarioAgregar.getValue());
															if(!status.isEmpty() && status.indexOf("err") == -1)
															{
																lblRowCount.setValue(u.llenarTabla(tblListado, datos.getTecnicos(((String)cmbResponsable.getValue()).split(" ")[0], tipoPersona), tipoUsuarioAgregar.toString()));
																u.msjEliminado("El " + tipoUsuarioAgregar);
															}
															else
																if(status.indexOf("Tec") == -1)
																	u.notificar("El " + tipoUsuarioAgregar + " no se pudo eliminar porque tiene " +
																				(tipoUsuarioAgregar == TipoUsuario.SUPERVISOR_TECNICO ? TipoUsuario.RESPONSABLE_TECNICO
																																	  : TipoUsuario.PRODUCTOR).getPlural() +
																				" asignados, si desea continuar elimínelos primero e inténtelo de nuevo", null, u.MSJ_ADVERTENCIA);
																else
																	u.msjNoEliminado(tipoUsuarioAgregar.toString());
														}
													}
												});
						}
						else
							u.msjNoSeleccionEliminar(tipoUsuarioAgregar.toString());
					}
				}
			};
	private ValueChangeListener llenarMpiosListener = new ValueChangeListener()
			{
				@Override
				public void valueChange(ValueChangeEvent event)
				{
					u.llenarCombo(cmbMpio, datos.getMunicipios((String)cmbEdo.getValue()));
				}
			};
	//endregion
	
	public Tecnico(int tipo, Usuario user, TipoUsuario usuarioAgregar)
	{
		tipoUsuarioAgregar = usuarioAgregar;
		tipoPersona = tipo;
		usuario = user;
		responsableDirecto = new String[]{ "Administrador de Distrito", "Supervisor Técnico" };
		u = new Utilerias();
		datos = new Datos();
	}
	
	@Override
	public void inicializar()
	{
		buildMainLayout();
		setCompositionRoot(mainLayout);
		
		//Variables
		estados = datos.getEstados();
		//Textfields
		txtCURR.setEnabled(false);
		//Comboboxes
		u.setupCombo(cmbResponsable, null, "Busque por nombre o CURR.", FilteringMode.CONTAINS, false, true);
		u.setupCombo(cmbEdo, estados, null, null, false, true);
		u.setupCombo(cmbMpio, null, null, null, false, true);
		u.setupCombo(cmbLicenciatura, datos.getLicenciaturas(), null, null, true, false);
		u.setupCombo(cmbInstitucionAcredita, datos.getInstituciones(), null, null, true, true);
		panResponsable.setCaption(responsableDirecto[tipoPersona - 1]);
		cmbResponsable.addValueChangeListener(llenarTablaListener);
		cmbEdo.addValueChangeListener(llenarMpiosListener);
		//Datefields
		u.setupCalendario(datNacimiento, true);
		u.setupCalendario(datIngreso, true);
		//Buttons
		btnNuevo.addClickListener(nuevoListener);
		btnVolver.addClickListener(volverEliminarListener);
		btnGuardar.addClickListener(guardarListener);
		//Tables
		tblListado.setSelectable(true);
		tblListado.setSortEnabled(true);
		tblListado.setColumnCollapsingAllowed(true);
		tblListado.addItemClickListener(llenarFormListener);
		
		//Inicializar en modo lista
		setTipo(MODO_LISTA);
		//Agregar las validaciones necesarias
		setValidaciones();
	}
	
	@Override
	public void setTipo(int modoOperacion)
	{
		btnNuevo.setClickShortcut(KeyCode.N, ModifierKey.ALT);
		if(modoOperacion == MODO_LISTA)
		{
			setResponsableDirecto(usuario.getTipo());
			mostrarTabla(true);
			btnGuardar.removeClickShortcut();
			btnGuardar.setVisible(false);
			btnVolver.setClickShortcut(KeyCode.E, ModifierKey.ALT);
			btnVolver.setCaption("Eliminar");
			btnNuevo.setCaption("Agregar Nuevo");
		}
		else
		{
			mostrarTabla(false);
			btnGuardar.setClickShortcut(KeyCode.G, ModifierKey.ALT);
			btnGuardar.setVisible(true);
			btnVolver.setClickShortcut(KeyCode.V, ModifierKey.ALT);
			btnVolver.setCaption("Volver");
			
			if(modoOperacion == MODO_AGREGAR)
			{
				elementosCurrHabilitados(true);
				btnGuardar.setCaption("Guardar");
				btnNuevo.setClickShortcut(KeyCode.L, ModifierKey.ALT);
				btnNuevo.setCaption("Limpiar");
			}
			else
			{
				elementosCurrHabilitados(false);
				btnGuardar.setCaption("Guardar cambios");
				btnNuevo.setCaption("Agregar Nuevo");
			}
		}
	}
	
	private void setResponsableDirecto(int tipoAgregando)
	{
		if(tipoAgregando == tipoPersona - 1)
		{
			String item = usuario.getCURR() + " " + usuario.getNombre() + " " +
						  usuario.getApPaterno() + " " + usuario.getApMaterno();
			cmbResponsable.addItem(item);
			cmbResponsable.select(item);
			cmbResponsable.setEnabled(false);
		}
		else
		{
			u.llenarCombo(cmbResponsable, datos.getRespTecnicos(usuario.getCURR(), tipoAgregando, tipoPersona - 1));
			if(cmbResponsable.size() == 0)
			{
				mainLayout.removeAllComponents();
				Notification.show("Imposible registrar. Se requiere que exista en la base de datos al menos un " + responsableDirecto[tipoPersona - 1] + " a quien pueda ser asignada esta persona.", Notification.Type.ERROR_MESSAGE);
			}
		}
	}
	
	private void mostrarTabla(boolean visible)
	{
		panCURR.setVisible(!visible);
		verLListado.setVisible(visible);
		verLDatos.setVisible(!visible);
	}
	
	private void elementosCurrHabilitados(boolean habilitado)
	{
		if(usuario.getTipo() > usuario.ADMINISTRADOR)
			cmbResponsable.setEnabled(habilitado);
		datIngreso.setEnabled(habilitado);
		cmbEdo.setEnabled(habilitado);
	}

	private void setValidaciones()
	{
		txtNombre.setMaxLength(40);
		txtApP.setMaxLength(20);
		txtApM.setMaxLength(20);
		
		txtCol.setMaxLength(40);
		txtCalle.setMaxLength(40);
		txtNoExt.setMaxLength(5);
		txtNoInt.setMaxLength(5);
		txtCP.setMaxLength(5);
		txtCP.addValidator(u.getRegExCP());
		
		txtTel.setMaxLength(10);
		txtCel.setMaxLength(10);
		txtEmail.setMaxLength(254);
		txtEmail.addValidator(u.getRegExEmail());
		
		txtPass.addValidator(u.getRegExPass());
	}

	private boolean validar()
	{
		if(cmbResponsable.getValue() == null)
			return u.notificar("Se requiere especificar el " + responsableDirecto[tipoPersona - 1], cmbResponsable, u.MSJ_ERROR);
		if(txtNombre.getValue().isEmpty())
			return u.notificar("Se requiere especificar el nombre", txtNombre, u.MSJ_ERROR);
		if(txtApP.getValue().isEmpty() || txtApM.getValue().isEmpty())
			return u.notificar("Se requiere especificar ambos apellidos", txtApP, u.MSJ_ERROR);
		if(datIngreso.getValue() == null)
			return u.notificar("Se requiere especificar la fecha de ingreso", datIngreso, u.MSJ_ERROR);
		if(cmbEdo.getValue() == null)
			return u.notificar("Se requiere especificar el estado", cmbEdo, u.MSJ_ERROR);
		if(cmbMpio.getValue() == null)
			return u.notificar("Se requiere especificar el municipio", cmbMpio, u.MSJ_ERROR);
		if(txtTel.getValue().isEmpty() && txtCel.getValue().isEmpty())
			return u.notificar("Se requiere especificar al menos un número de teléfono", txtTel, u.MSJ_ERROR);
		if(cmbLicenciatura.getValue() == null)
			return u.notificar("Se requiere especificar la licenciatura", cmbLicenciatura, u.MSJ_ERROR);
		if(txtUser.getValue().isEmpty())
			return u.notificar("Se requiere especificar el nombre de usuario", txtUser, u.MSJ_ERROR);
		if(txtPass.getValue().isEmpty())
			return u.notificar("Se requiere especificar la contraseña", txtPass, u.MSJ_ERROR);
		
		if(!txtPass.getValue().equals(txtPass2.getValue()))
			return u.notificar("Los valores de contraseña no coinciden", txtPass, u.MSJ_ERROR);
		
		if(!txtEmail.isValid())
			return u.notificar("El correo electrónico debe cumplir con el formato 'usuario@dominio.com'", txtEmail, u.MSJ_ERROR);
		
		return true;
	}
	
	private LinkedList<Object> llenarListaDeParametros()
	{
		LinkedList<Object>valores = new LinkedList<Object>();
		valores.add(((String)cmbResponsable.getValue()).split(" ")[0]);
		valores.add(tipoPersona);
		valores.add(txtNombre.getValue());
		valores.add(txtApP.getValue());
		valores.add(txtApM.getValue());
		valores.add(datNacimiento.getLocalDate() != null ? u.fechaUtilToSQL(datNacimiento.getLocalDate().toDate()) : null);
		valores.add(cmbEdo.getValue());
		valores.add(cmbMpio.getValue());
		valores.add(txtLoc.getValue());
		valores.add(txtCol.getValue());
		valores.add(txtCalle.getValue());
		valores.add(txtNoExt.getValue());
		valores.add(txtNoInt.getValue());
		valores.add(txtCP.getValue());
		valores.add(txtTel.getValue());
		valores.add(txtCel.getValue());
		valores.add(txtEmail.getValue());
		valores.add(cmbLicenciatura.getValue());
		valores.add(chkM.getValue());
		valores.add(chkD.getValue());
		valores.add(cmbInstitucionAcredita.getValue());
		valores.add(txtAcreditacion.getValue());
		valores.add("");//TODO
		valores.add(panFoto.getFoto());
		valores.add(txtUser.getValue());
		valores.add(txtPass.getValue());
		return valores;
	}

	private void showDialog(final int modo)
	{
		ConfirmDialog.show( this.getUI(),
							"Advertencia:",
							"Perderá todos los cambios realizados hasta el momento.\n¿Desea continuar?",
							"Si", "No",
							new ConfirmDialog.Listener()
							{
								public void onClose(ConfirmDialog dialog)
								{
									if (dialog.isConfirmed())
										resetForm(modo);
								}
							});
	}
	
	private void resetForm(int modo)
	{
		Object respSelected = cmbResponsable.getValue();
		inicializar();
		setTipo(modo);
		cmbResponsable.setValue(respSelected);
	}
	//region UI
	
	@AutoGenerated
	private VerticalLayout buildMainLayout() {
		// common part: create layout
		mainLayout = new VerticalLayout();
		mainLayout.setImmediate(false);
		mainLayout.setWidth("-1px");
		mainLayout.setHeight("-1px");
		mainLayout.setMargin(true);
		mainLayout.setSpacing(true);
		
		// top-level component properties
		setWidth("-1px");
		setHeight("-1px");
		
		// absLRespCURR
		absLRespCURR = buildAbsLRespCURR();
		mainLayout.addComponent(absLRespCURR);
		
		// verLListado
		verLListado = buildVerLListado();
		mainLayout.addComponent(verLListado);
		
		// verLDatos
		verLDatos = buildVerLDatos();
		mainLayout.addComponent(verLDatos);
		
		// absLBotones
		absLBotones = buildAbsLBotones();
		mainLayout.addComponent(absLBotones);
		mainLayout.setComponentAlignment(absLBotones, new Alignment(24));
		
		return mainLayout;
	}

	@AutoGenerated
	private AbsoluteLayout buildAbsLRespCURR() {
		// common part: create layout
		absLRespCURR = new AbsoluteLayout();
		absLRespCURR.setImmediate(false);
		absLRespCURR.setWidth("801px");
		absLRespCURR.setHeight("66px");
		
		// panResponsable
		panResponsable = buildPanResponsable();
		absLRespCURR.addComponent(panResponsable);
		
		// panCURR
		panCURR = buildPanCURR();
		absLRespCURR.addComponent(panCURR, "top:0.0px;right:0.0px;");
		
		return absLRespCURR;
	}

	@AutoGenerated
	private Panel buildPanResponsable() {
		// common part: create layout
		panResponsable = new Panel();
		panResponsable.setCaption("Responsable Directo");
		panResponsable.setImmediate(false);
		panResponsable.setWidth("501px");
		panResponsable.setHeight("-1px");
		
		// absLResponsable
		absLResponsable = buildAbsLResponsable();
		panResponsable.setContent(absLResponsable);
		
		return panResponsable;
	}

	@AutoGenerated
	private AbsoluteLayout buildAbsLResponsable() {
		// common part: create layout
		absLResponsable = new AbsoluteLayout();
		absLResponsable.setImmediate(false);
		absLResponsable.setWidth("100.0%");
		absLResponsable.setHeight("45px");
		
		// cmbResponsable
		cmbResponsable = new ComboBox();
		cmbResponsable.setImmediate(true);
		cmbResponsable.setWidth("480px");
		cmbResponsable.setHeight("25px");
		absLResponsable.addComponent(cmbResponsable, "top:10.0px;left:10.0px;");
		
		return absLResponsable;
	}

	@AutoGenerated
	private Panel buildPanCURR() {
		// common part: create layout
		panCURR = new Panel();
		panCURR.setCaption("CURR (Clave Unica de Registro RIGRAT)");
		panCURR.setImmediate(false);
		panCURR.setWidth("271px");
		panCURR.setHeight("-1px");
		
		// absLCURR
		absLCURR = buildAbsLCURR();
		panCURR.setContent(absLCURR);
		
		return panCURR;
	}

	@AutoGenerated
	private AbsoluteLayout buildAbsLCURR() {
		// common part: create layout
		absLCURR = new AbsoluteLayout();
		absLCURR.setImmediate(false);
		absLCURR.setWidth("100.0%");
		absLCURR.setHeight("45px");
		
		// txtCURR
		txtCURR = new TextField();
		txtCURR.setImmediate(false);
		txtCURR.setWidth("250px");
		txtCURR.setHeight("25px");
		absLCURR.addComponent(txtCURR, "top:10.0px;left:10.0px;");
		
		return absLCURR;
	}
	@AutoGenerated
	private VerticalLayout buildVerLListado() {
		// common part: create layout
		verLListado = new VerticalLayout();
		verLListado.setImmediate(false);
		verLListado.setWidth("-1px");
		verLListado.setHeight("-1px");
		verLListado.setMargin(false);
		
		// tblListado
		tblListado = new Table();
		tblListado
				.setCaption("* Dar doble click sobre un elemento para modificarlo");
		tblListado.setImmediate(false);
		tblListado.setWidth("801px");
		tblListado.setHeight("300px");
		verLListado.addComponent(tblListado);
		
		// lblRowCount
		lblRowCount = new Label();
		lblRowCount.setImmediate(false);
		lblRowCount.setWidth("-1px");
		lblRowCount.setHeight("-1px");
		lblRowCount.setValue("0 registros encontrados");
		verLListado.addComponent(lblRowCount);
		
		return verLListado;
	}

	@AutoGenerated
	private VerticalLayout buildVerLDatos() {
		// common part: create layout
		verLDatos = new VerticalLayout();
		verLDatos.setImmediate(false);
		verLDatos.setWidth("-1px");
		verLDatos.setHeight("-1px");
		verLDatos.setMargin(false);
		verLDatos.setSpacing(true);
		
		// absLGeneralesFoto
		absLGeneralesFoto = buildAbsLGeneralesFoto();
		verLDatos.addComponent(absLGeneralesFoto);
		
		// panDireccion
		panDireccion = buildPanDireccion();
		verLDatos.addComponent(panDireccion);
		
		// panContacto
		panContacto = buildPanContacto();
		verLDatos.addComponent(panContacto);
		
		// absLCredencialesUser
		absLCredencialesUser = buildAbsLCredencialesUser();
		verLDatos.addComponent(absLCredencialesUser);
		
		return verLDatos;
	}

	@AutoGenerated
	private AbsoluteLayout buildAbsLGeneralesFoto() {
		// common part: create layout
		absLGeneralesFoto = new AbsoluteLayout();
		absLGeneralesFoto.setImmediate(false);
		absLGeneralesFoto.setWidth("801px");
		absLGeneralesFoto.setHeight("221px");
		
		// panGenerales
		panGenerales = buildPanGenerales();
		absLGeneralesFoto.addComponent(panGenerales);
		
		// panFoto
		panFoto = new Foto();
		panFoto.setImmediate(false);
		panFoto.setWidth("-1px");
		panFoto.setHeight("-1px");
		absLGeneralesFoto.addComponent(panFoto, "top:0.0px;right:0.0px;");
		
		return absLGeneralesFoto;
	}

	@AutoGenerated
	private Panel buildPanGenerales() {
		// common part: create layout
		panGenerales = new Panel();
		panGenerales.setCaption("Datos Generales");
		panGenerales.setImmediate(false);
		panGenerales.setWidth("341px");
		panGenerales.setHeight("-1px");
		
		// verLGenerales
		verLGenerales = buildVerLGenerales();
		panGenerales.setContent(verLGenerales);
		
		return panGenerales;
	}

	@AutoGenerated
	private VerticalLayout buildVerLGenerales() {
		// common part: create layout
		verLGenerales = new VerticalLayout();
		verLGenerales.setImmediate(false);
		verLGenerales.setWidth("100.0%");
		verLGenerales.setHeight("-1px");
		verLGenerales.setMargin(false);
		
		// absLGenerales1
		absLGenerales1 = buildAbsLGenerales1();
		verLGenerales.addComponent(absLGenerales1);
		
		// absLGenerales2
		absLGenerales2 = buildAbsLGenerales2();
		verLGenerales.addComponent(absLGenerales2);
		
		// absLGenerales3
		absLGenerales3 = buildAbsLGenerales3();
		verLGenerales.addComponent(absLGenerales3);
		
		return verLGenerales;
	}

	@AutoGenerated
	private AbsoluteLayout buildAbsLGenerales1() {
		// common part: create layout
		absLGenerales1 = new AbsoluteLayout();
		absLGenerales1.setImmediate(false);
		absLGenerales1.setWidth("100.0%");
		absLGenerales1.setHeight("100px");
		
		// txtNombre
		txtNombre = new TextField();
		txtNombre.setCaption("Nombre");
		txtNombre.setImmediate(false);
		txtNombre.setWidth("320px");
		txtNombre.setHeight("25px");
		absLGenerales1.addComponent(txtNombre, "top:28.0px;left:10.0px;");
		
		// txtApP
		txtApP = new TextField();
		txtApP.setCaption("Apellido Paterno");
		txtApP.setImmediate(false);
		txtApP.setWidth("150px");
		txtApP.setHeight("25px");
		absLGenerales1.addComponent(txtApP, "top:73.0px;left:10.0px;");
		
		// txtApM
		txtApM = new TextField();
		txtApM.setCaption("Apellido Materno");
		txtApM.setImmediate(false);
		txtApM.setWidth("150px");
		txtApM.setHeight("25px");
		absLGenerales1.addComponent(txtApM, "top:73.0px;left:180.0px;");
		
		return absLGenerales1;
	}

	@AutoGenerated
	private AbsoluteLayout buildAbsLGenerales2() {
		// common part: create layout
		absLGenerales2 = new AbsoluteLayout();
		absLGenerales2.setImmediate(false);
		absLGenerales2.setWidth("100.0%");
		absLGenerales2.setHeight("45px");
		
		// datNacimiento
		datNacimiento = new TuningDateField();
		datNacimiento.setCaption("Fecha de Nacimiento");
		datNacimiento.setImmediate(false);
		datNacimiento.setWidth("200px");
		datNacimiento.setHeight("25px");
		absLGenerales2.addComponent(datNacimiento, "top:18.0px;left:10.0px;");
		
		return absLGenerales2;
	}

	@AutoGenerated
	private AbsoluteLayout buildAbsLGenerales3() {
		// common part: create layout
		absLGenerales3 = new AbsoluteLayout();
		absLGenerales3.setImmediate(false);
		absLGenerales3.setWidth("100.0%");
		absLGenerales3.setHeight("55px");
		
		// datIngreso
		datIngreso = new TuningDateField();
		datIngreso.setCaption("Fecha de Ingreso al Programa");
		datIngreso.setImmediate(false);
		datIngreso.setWidth("200px");
		datIngreso.setHeight("25px");
		absLGenerales3.addComponent(datIngreso, "top:18.0px;left:10.0px;");
		
		return absLGenerales3;
	}

	@AutoGenerated
	private Panel buildPanDireccion() {
		// common part: create layout
		panDireccion = new Panel();
		panDireccion.setCaption("Dirección");
		panDireccion.setImmediate(false);
		panDireccion.setWidth("801px");
		panDireccion.setHeight("-1px");
		
		// verLDireccion
		verLDireccion = buildVerLDireccion();
		panDireccion.setContent(verLDireccion);
		
		return panDireccion;
	}

	@AutoGenerated
	private VerticalLayout buildVerLDireccion() {
		// common part: create layout
		verLDireccion = new VerticalLayout();
		verLDireccion.setImmediate(false);
		verLDireccion.setWidth("100.0%");
		verLDireccion.setHeight("100.0%");
		verLDireccion.setMargin(false);
		
		// absLDireccion1
		absLDireccion1 = buildAbsLDireccion1();
		verLDireccion.addComponent(absLDireccion1);
		
		// absLDireccion2
		absLDireccion2 = buildAbsLDireccion2();
		verLDireccion.addComponent(absLDireccion2);
		
		// absLDireccion3
		absLDireccion3 = buildAbsLDireccion3();
		verLDireccion.addComponent(absLDireccion3);
		
		return verLDireccion;
	}

	@AutoGenerated
	private AbsoluteLayout buildAbsLDireccion1() {
		// common part: create layout
		absLDireccion1 = new AbsoluteLayout();
		absLDireccion1.setImmediate(false);
		absLDireccion1.setWidth("100.0%");
		absLDireccion1.setHeight("55px");
		
		// cmbEdo
		cmbEdo = new ComboBox();
		cmbEdo.setCaption("Estado");
		cmbEdo.setImmediate(true);
		cmbEdo.setWidth("260px");
		cmbEdo.setHeight("25px");
		absLDireccion1.addComponent(cmbEdo, "top:28.0px;left:10.0px;");
		
		// cmbMpio
		cmbMpio = new ComboBox();
		cmbMpio.setCaption("Municipio");
		cmbMpio.setImmediate(true);
		cmbMpio.setWidth("500px");
		cmbMpio.setHeight("25px");
		absLDireccion1.addComponent(cmbMpio, "top:28.0px;left:290.0px;");
		
		return absLDireccion1;
	}

	@AutoGenerated
	private AbsoluteLayout buildAbsLDireccion2() {
		// common part: create layout
		absLDireccion2 = new AbsoluteLayout();
		absLDireccion2.setImmediate(false);
		absLDireccion2.setWidth("100.0%");
		absLDireccion2.setHeight("45px");
		
		// txtLoc
		txtLoc = new TextField();
		txtLoc.setCaption("Localidad");
		txtLoc.setImmediate(false);
		txtLoc.setWidth("380px");
		txtLoc.setHeight("25px");
		absLDireccion2.addComponent(txtLoc, "top:18.0px;left:10.0px;");
		
		// txtCol
		txtCol = new TextField();
		txtCol.setCaption("Colonia");
		txtCol.setImmediate(false);
		txtCol.setWidth("380px");
		txtCol.setHeight("25px");
		absLDireccion2.addComponent(txtCol, "top:18.0px;left:410.0px;");
		
		return absLDireccion2;
	}

	@AutoGenerated
	private AbsoluteLayout buildAbsLDireccion3() {
		// common part: create layout
		absLDireccion3 = new AbsoluteLayout();
		absLDireccion3.setImmediate(false);
		absLDireccion3.setWidth("100.0%");
		absLDireccion3.setHeight("55px");
		
		// txtCalle
		txtCalle = new TextField();
		txtCalle.setCaption("Calle");
		txtCalle.setImmediate(false);
		txtCalle.setWidth("450px");
		txtCalle.setHeight("25px");
		absLDireccion3.addComponent(txtCalle, "top:18.0px;left:10.0px;");
		
		// txtNoExt
		txtNoExt = new TextField();
		txtNoExt.setCaption("Núm. Ext.");
		txtNoExt.setImmediate(false);
		txtNoExt.setWidth("90px");
		txtNoExt.setHeight("25px");
		absLDireccion3.addComponent(txtNoExt, "top:18.0px;left:480.0px;");
		
		// txtNoInt
		txtNoInt = new TextField();
		txtNoInt.setCaption("Núm. Int.");
		txtNoInt.setImmediate(false);
		txtNoInt.setWidth("90px");
		txtNoInt.setHeight("25px");
		absLDireccion3.addComponent(txtNoInt, "top:18.0px;left:590.0px;");
		
		// txtCP
		txtCP = new TextField();
		txtCP.setCaption("C.P.");
		txtCP.setImmediate(true);
		txtCP.setWidth("90px");
		txtCP.setHeight("25px");
		absLDireccion3.addComponent(txtCP, "top:18.0px;left:700.0px;");
		
		return absLDireccion3;
	}

	@AutoGenerated
	private Panel buildPanContacto() {
		// common part: create layout
		panContacto = new Panel();
		panContacto.setCaption("Contacto");
		panContacto.setImmediate(false);
		panContacto.setWidth("801px");
		panContacto.setHeight("-1px");
		
		// absLContacto
		absLContacto = buildAbsLContacto();
		panContacto.setContent(absLContacto);
		
		return panContacto;
	}

	@AutoGenerated
	private AbsoluteLayout buildAbsLContacto() {
		// common part: create layout
		absLContacto = new AbsoluteLayout();
		absLContacto.setImmediate(false);
		absLContacto.setWidth("100.0%");
		absLContacto.setHeight("65px");
		
		// txtTel
		txtTel = new TextField();
		txtTel.setCaption("Teléfono Fijo (10dig)");
		txtTel.setImmediate(false);
		txtTel.setWidth("170px");
		txtTel.setHeight("25px");
		absLContacto.addComponent(txtTel, "top:28.0px;left:10.0px;");
		
		// txtCel
		txtCel = new TextField();
		txtCel.setCaption("Celular (10dig)");
		txtCel.setImmediate(false);
		txtCel.setWidth("170px");
		txtCel.setHeight("25px");
		absLContacto.addComponent(txtCel, "top:28.0px;left:200.0px;");
		
		// txtEmail
		txtEmail = new TextField();
		txtEmail.setCaption("Correo electrónico");
		txtEmail.setImmediate(true);
		txtEmail.setWidth("400px");
		txtEmail.setHeight("25px");
		absLContacto.addComponent(txtEmail, "top:28.0px;left:390.0px;");
		
		return absLContacto;
	}

	@AutoGenerated
	private AbsoluteLayout buildAbsLCredencialesUser() {
		// common part: create layout
		absLCredencialesUser = new AbsoluteLayout();
		absLCredencialesUser.setImmediate(false);
		absLCredencialesUser.setWidth("100.0%");
		absLCredencialesUser.setHeight("158px");
		
		// panCredenciales
		panCredenciales = buildPanCredenciales();
		absLCredencialesUser.addComponent(panCredenciales);
		
		// panUser
		panUser = buildPanUser();
		absLCredencialesUser.addComponent(panUser, "top:0.0px;right:0.0px;");
		
		return absLCredencialesUser;
	}

	@AutoGenerated
	private Panel buildPanCredenciales() {
		// common part: create layout
		panCredenciales = new Panel();
		panCredenciales.setImmediate(false);
		panCredenciales.setWidth("521px");
		panCredenciales.setHeight("-1px");
		
		// verLCredenciales
		verLCredenciales = buildVerLCredenciales();
		panCredenciales.setContent(verLCredenciales);
		
		return panCredenciales;
	}

	@AutoGenerated
	private VerticalLayout buildVerLCredenciales() {
		// common part: create layout
		verLCredenciales = new VerticalLayout();
		verLCredenciales.setImmediate(false);
		verLCredenciales.setWidth("100.0%");
		verLCredenciales.setHeight("100.0%");
		verLCredenciales.setMargin(false);
		
		// absLCredenciales1
		absLCredenciales1 = buildAbsLCredenciales1();
		verLCredenciales.addComponent(absLCredenciales1);
		
		// absLCredenciales2
		absLCredenciales2 = buildAbsLCredenciales2();
		verLCredenciales.addComponent(absLCredenciales2);
		
		// absLCredenciales3
		absLCredenciales3 = buildAbsLCredenciales3();
		verLCredenciales.addComponent(absLCredenciales3);
		
		return verLCredenciales;
	}

	@AutoGenerated
	private AbsoluteLayout buildAbsLCredenciales1() {
		// common part: create layout
		absLCredenciales1 = new AbsoluteLayout();
		absLCredenciales1.setImmediate(false);
		absLCredenciales1.setWidth("100.0%");
		absLCredenciales1.setHeight("55px");
		
		// cmbLicenciatura
		cmbLicenciatura = new ComboBox();
		cmbLicenciatura.setCaption("Licenciatura");
		cmbLicenciatura.setImmediate(false);
		cmbLicenciatura.setWidth("320px");
		cmbLicenciatura.setHeight("25px");
		absLCredenciales1.addComponent(cmbLicenciatura,
				"top:28.0px;left:10.0px;");
		
		// chkM
		chkM = new CheckBox();
		chkM.setCaption("Maestría");
		chkM.setImmediate(false);
		chkM.setWidth("-1px");
		chkM.setHeight("-1px");
		absLCredenciales1.addComponent(chkM, "top:28.0px;left:350.0px;");
		
		// chkD
		chkD = new CheckBox();
		chkD.setCaption("Doctorado");
		chkD.setImmediate(false);
		chkD.setWidth("-1px");
		chkD.setHeight("-1px");
		absLCredenciales1.addComponent(chkD, "top:28.0px;left:435.0px;");
		
		return absLCredenciales1;
	}

	@AutoGenerated
	private AbsoluteLayout buildAbsLCredenciales2() {
		// common part: create layout
		absLCredenciales2 = new AbsoluteLayout();
		absLCredenciales2.setImmediate(false);
		absLCredenciales2.setWidth("100.0%");
		absLCredenciales2.setHeight("45px");
		
		// cmbInstitucionAcredita
		cmbInstitucionAcredita = new ComboBox();
		cmbInstitucionAcredita.setCaption("Institución que Acredita");
		cmbInstitucionAcredita.setImmediate(false);
		cmbInstitucionAcredita.setWidth("500px");
		cmbInstitucionAcredita.setHeight("25px");
		absLCredenciales2.addComponent(cmbInstitucionAcredita,
				"top:18.0px;left:10.0px;");
		
		return absLCredenciales2;
	}

	@AutoGenerated
	private AbsoluteLayout buildAbsLCredenciales3() {
		// common part: create layout
		absLCredenciales3 = new AbsoluteLayout();
		absLCredenciales3.setImmediate(false);
		absLCredenciales3.setWidth("100.0%");
		absLCredenciales3.setHeight("55px");
		
		// txtAcreditacion
		txtAcreditacion = new TextField();
		txtAcreditacion.setCaption("Clave de Acreditación");
		txtAcreditacion.setImmediate(false);
		txtAcreditacion.setWidth("500px");
		txtAcreditacion.setHeight("25px");
		absLCredenciales3.addComponent(txtAcreditacion,
				"top:18.0px;left:10.0px;");
		
		return absLCredenciales3;
	}

	@AutoGenerated
	private Panel buildPanUser() {
		// common part: create layout
		panUser = new Panel();
		panUser.setImmediate(false);
		panUser.setWidth("251px");
		panUser.setHeight("-1px");
		
		// absLUser
		absLUser = buildAbsLUser();
		panUser.setContent(absLUser);
		
		return panUser;
	}

	@AutoGenerated
	private AbsoluteLayout buildAbsLUser() {
		// common part: create layout
		absLUser = new AbsoluteLayout();
		absLUser.setImmediate(false);
		absLUser.setWidth("100.0%");
		absLUser.setHeight("155px");
		
		// txtUser
		txtUser = new TextField();
		txtUser.setCaption("Nombre de Usuario");
		txtUser.setImmediate(false);
		txtUser.setWidth("231px");
		txtUser.setHeight("25px");
		absLUser.addComponent(txtUser, "top:28.0px;left:10.0px;");
		
		// txtPass
		txtPass = new PasswordField();
		txtPass.setCaption("Contraseña");
		txtPass.setImmediate(true);
		txtPass.setWidth("231px");
		txtPass.setHeight("25px");
		absLUser.addComponent(txtPass, "top:73.0px;left:10.0px;");
		
		// txtPass2
		txtPass2 = new PasswordField();
		txtPass2.setCaption("Repetir Contraseña");
		txtPass2.setImmediate(false);
		txtPass2.setWidth("231px");
		txtPass2.setHeight("25px");
		absLUser.addComponent(txtPass2, "top:118.0px;left:10.0px;");
		
		return absLUser;
	}

	@AutoGenerated
	private AbsoluteLayout buildAbsLBotones() {
		// common part: create layout
		absLBotones = new AbsoluteLayout();
		absLBotones.setImmediate(false);
		absLBotones.setWidth("801px");
		absLBotones.setHeight("30px");
		
		// btnGuardar
		btnGuardar = new Button();
		btnGuardar.setCaption("Guardar");
		btnGuardar.setImmediate(true);
		btnGuardar.setWidth("-1px");
		btnGuardar.setHeight("-1px");
		absLBotones.addComponent(btnGuardar, "right:0.0px;bottom:0.0px;");
		
		// horLBotones
		horLBotones = buildHorLBotones();
		absLBotones.addComponent(horLBotones, "bottom:0.0px;left:0.0px;");
		
		return absLBotones;
	}

	@AutoGenerated
	private HorizontalLayout buildHorLBotones() {
		// common part: create layout
		horLBotones = new HorizontalLayout();
		horLBotones.setImmediate(false);
		horLBotones.setWidth("-1px");
		horLBotones.setHeight("-1px");
		horLBotones.setMargin(false);
		horLBotones.setSpacing(true);
		
		// btnNuevo
		btnNuevo = new Button();
		btnNuevo.setCaption("Agregar Nuevo");
		btnNuevo.setImmediate(true);
		btnNuevo.setWidth("-1px");
		btnNuevo.setHeight("-1px");
		horLBotones.addComponent(btnNuevo);
		
		// btnVolver
		btnVolver = new Button();
		btnVolver.setCaption("Volver");
		btnVolver.setImmediate(true);
		btnVolver.setWidth("-1px");
		btnVolver.setHeight("-1px");
		horLBotones.addComponent(btnVolver);
		
		return horLBotones;
	}
	
	//endregion
}